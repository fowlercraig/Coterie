var Formstone=this.Formstone=function(e,t,n){"use strict";function i(e){d.Plugins[e].initialized||(d.Plugins[e].methods._setup.call(n),d.Plugins[e].initialized=!0)}function r(e,t,n,i){var r,o={raw:{}};i=i||{};for(r in i)i.hasOwnProperty(r)&&("classes"===e?(o.raw[i[r]]=t+"-"+i[r],o[i[r]]="."+t+"-"+i[r]):(o.raw[r]=i[r],o[r]=i[r]+"."+t));for(r in n)n.hasOwnProperty(r)&&("classes"===e?(o.raw[r]=n[r].replace(/{ns}/g,t),o[r]=n[r].replace(/{ns}/g,"."+t)):(o.raw[r]=n[r].replace(/.{ns}/g,""),o[r]=n[r].replace(/{ns}/g,t)));return o}function o(){var e,t={transition:"transitionend",MozTransition:"transitionend",OTransition:"otransitionend",WebkitTransition:"webkitTransitionEnd"},i=["transition","-webkit-transition"],r={transform:"transform",MozTransform:"-moz-transform",OTransform:"-o-transform",msTransform:"-ms-transform",webkitTransform:"-webkit-transform"},o="transitionend",s="",a="",l=n.createElement("div");for(e in t)if(t.hasOwnProperty(e)&&e in l.style){o=t[e],d.support.transition=!0;break}h.transitionEnd=o+".{ns}";for(e in i)if(i.hasOwnProperty(e)&&i[e]in l.style){s=i[e];break}d.transition=s;for(e in r)if(r.hasOwnProperty(e)&&r[e]in l.style){d.support.transform=!0,a=r[e];break}d.transform=a}function s(){d.windowWidth=d.$window.width(),d.windowHeight=d.$window.height(),f=c.startTimer(f,m,a)}function a(){for(var e in d.ResizeHandlers)d.ResizeHandlers.hasOwnProperty(e)&&d.ResizeHandlers[e].callback.call(t,d.windowWidth,d.windowHeight)}function l(e,t){return parseInt(e.priority)-parseInt(t.priority)}var u=function(){this.Version="0.6.4",this.Plugins={},this.ResizeHandlers=[],this.window=t,this.$window=e(t),this.document=n,this.$document=e(n),this.$body=null,this.windowWidth=0,this.windowHeight=0,this.userAgent=t.navigator.userAgent||t.navigator.vendor||t.opera,this.isFirefox=/Firefox/i.test(this.userAgent),this.isChrome=/Chrome/i.test(this.userAgent),this.isSafari=/Safari/i.test(this.userAgent)&&!this.isChrome,this.isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(this.userAgent),this.isFirefoxMobile=this.isFirefox&&this.isMobile,this.transform=null,this.transition=null,this.support={file:!!(t.File&&t.FileList&&t.FileReader),history:!!(t.history&&t.history.pushState&&t.history.replaceState),matchMedia:!(!t.matchMedia&&!t.msMatchMedia),raf:!(!t.requestAnimationFrame||!t.cancelAnimationFrame),touch:!!("ontouchstart"in t||t.DocumentTouch&&n instanceof t.DocumentTouch),transition:!1,transform:!1}},c={killEvent:function(e,t){try{e.preventDefault(),e.stopPropagation(),t&&e.stopImmediatePropagation()}catch(n){}},startTimer:function(e,t,n,i){return c.clearTimer(e),i?setInterval(n,t):setTimeout(n,t)},clearTimer:function(e,t){e&&(t?clearInterval(e):clearTimeout(e),e=null)},sortAsc:function(e,t){return parseInt(t)-parseInt(e)},sortDesc:function(e,t){return parseInt(t)-parseInt(e)}},d=new u,p={base:"{ns}",element:"{ns}-element"},h={namespace:".{ns}",blur:"blur.{ns}",change:"change.{ns}",click:"click.{ns}",dblClick:"dblclick.{ns}",drag:"drag.{ns}",dragEnd:"dragend.{ns}",dragEnter:"dragenter.{ns}",dragLeave:"dragleave.{ns}",dragOver:"dragover.{ns}",dragStart:"dragstart.{ns}",drop:"drop.{ns}",error:"error.{ns}",focus:"focus.{ns}",focusIn:"focusin.{ns}",focusOut:"focusout.{ns}",input:"input.{ns}",keyDown:"keydown.{ns}",keyPress:"keypress.{ns}",keyUp:"keyup.{ns}",load:"load.{ns}",mouseDown:"mousedown.{ns}",mouseEnter:"mouseenter.{ns}",mouseLeave:"mouseleave.{ns}",mouseMove:"mousemove.{ns}",mouseOut:"mouseout.{ns}",mouseOver:"mouseover.{ns}",mouseUp:"mouseup.{ns}",resize:"resize.{ns}",scroll:"scroll.{ns}",select:"select.{ns}",touchCancel:"touchcancel.{ns}",touchEnd:"touchend.{ns}",touchLeave:"touchleave.{ns}",touchMove:"touchmove.{ns}",touchStart:"touchstart.{ns}"};u.prototype.Plugin=function(n,o){return d.Plugins[n]=function(n,o){function s(t){var r="object"===e.type(t);t=e.extend(!0,{},o.defaults||{},r?t:{});for(var s=this,a=0,l=s.length;l>a;a++){var c=s.eq(a);if(!u(c)){var d=c.data(n+"-options"),p=e.extend(!0,{$el:c},t,"object"===e.type(d)?d:{});c.addClass(o.classes.raw.element).data(y,p),i(n),o.methods._construct.apply(c,[p].concat(Array.prototype.slice.call(arguments,r?1:0)))}}return s}function a(){o.functions.iterate.apply(this,[o.methods._destruct].concat(Array.prototype.slice.call(arguments,1))),this.removeClass(o.classes.raw.element).removeData(y)}function u(e){return e.data(y)}function f(t){if(this instanceof e){var n=o.methods[t];return"object"!==e.type(t)&&t?n&&0!==t.indexOf("_")?o.functions.iterate.apply(this,[n].concat(Array.prototype.slice.call(arguments,1))):this:s.apply(this,arguments)}}function m(n){var i=o.utilities[n]||o.utilities._initialize||!1;return i?i.apply(t,Array.prototype.slice.call(arguments,"object"===e.type(n)?0:1)):void 0}function v(t){o.defaults=e.extend(!0,o.defaults,t||{})}function g(t){for(var n=this,i=0,r=n.length;r>i;i++){var o=n.eq(i),s=u(o)||{};"undefined"!==e.type(s.$el)&&t.apply(o,[s].concat(Array.prototype.slice.call(arguments,1)))}return n}var y="fs-"+n,b="fs"+n.replace(/(^|\s)([a-z])/g,function(e,t,n){return t+n.toUpperCase()});return o.initialized=!1,o.priority=o.priority||10,o.classes=r("classes",y,p,o.classes),o.events=r("events",n,h,o.events),o.functions=e.extend({getData:u,iterate:g},c,o.functions),o.methods=e.extend(!0,{_setup:e.noop,_construct:e.noop,_destruct:e.noop,_resize:!1,destroy:a},o.methods),o.utilities=e.extend(!0,{_initialize:!1,_delegate:!1,defaults:v},o.utilities),o.widget&&(e.fn[n]=e.fn[b]=f),e[n]=e[b]=o.utilities._delegate||m,o.namespace=n,o.namespaceClean=b,o.methods._resize&&(d.ResizeHandlers.push({namespace:n,priority:o.priority,callback:o.methods._resize}),d.ResizeHandlers.sort(l)),o}(n,o),d.Plugins[n]};var f=null,m=20;return d.$window.on("resize.fs",s),s(),e(function(){d.$body=e("body");for(var t in d.Plugins)d.Plugins.hasOwnProperty(t)&&i(t)}),h.clickTouchStart=h.click+" "+h.touchStart,o(),d}(jQuery,this,document);!function(e,t){"use strict";function n(e){e.touches=[],e.touching=!1,this.on(g.dragStart,y.killEvent),e.tap?(e.pan=!1,e.scale=!1,e.swipe=!1,t.support.touch?this.on([g.touchStart,g.pointerDown].join(" "),e,o):this.on(g.click,e,c)):(e.pan||e.swipe||e.scale)&&(e.tap=!1,e.swipe&&(e.pan=!0),e.scale&&(e.axis=!1),e.axis?(e.axisX="x"===e.axis,e.axisY="y"===e.axis):f(this,"none"),this.on([g.touchStart,g.pointerDown].join(" "),e,r),e.pan&&!t.support.touch&&this.on(g.mouseDown,e,o))}function i(){f(this.off(g.namespace),"")}function r(e){e.preventManipulation&&e.preventManipulation();var t=e.data,n=e.originalEvent;if(n.type.match(/(up|end)$/i))return void u(e);if(n.pointerId){var i=!1;for(var r in t.touches)t.touches[r].id===n.pointerId&&(i=!0,t.touches[r].pageX=n.clientX,t.touches[r].pageY=n.clientY);i||t.touches.push({id:n.pointerId,pageX:n.clientX,pageY:n.clientY})}else t.touches=n.touches;n.type.match(/(down|start)$/i)?o(e):n.type.match(/move$/i)&&s(e)}function o(t){var n=t.data,i="undefined"!==e.type(n.touches)?n.touches[0]:null;if(n.touching||(n.startE=t.originalEvent,n.startX=i?i.pageX:t.pageX,n.startY=i?i.pageY:t.pageY,n.startT=(new Date).getTime(),n.scaleD=1,n.passed=!1),n.tap)n.clicked=!1,n.$el.on([g.touchMove,g.pointerMove].join(" "),n,r).on([g.touchEnd,g.touchCancel,g.pointerUp,g.pointerCancel].join(" "),n,r);else if(n.pan||n.scale){n.$links&&n.$links.off(g.click);var o=d(n.scale?g.scaleStart:g.panStart,t,n.startX,n.startY,n.scaleD,0,0,"","");if(n.scale&&n.touches&&n.touches.length>=2){var a=n.touches;n.pinch={startX:p(a[0].pageX,a[1].pageX),startY:p(a[0].pageY,a[1].pageY),startD:h(a[1].pageX-a[0].pageX,a[1].pageY-a[0].pageY)},o.pageX=n.startX=n.pinch.startX,o.pageY=n.startY=n.pinch.startY}n.touching||(n.touching=!0,n.pan&&b.on(g.mouseMove,n,s).on(g.mouseUp,n,u),b.on([g.touchMove,g.touchEnd,g.touchCancel,g.pointerMove,g.pointerUp,g.pointerCancel].join(" "),n,r),n.$el.trigger(o))}}function s(t){var n=t.data,i="undefined"!==e.type(n.touches)?n.touches[0]:null,r=i?i.pageX:t.pageX,o=i?i.pageY:t.pageY,s=r-n.startX,a=o-n.startY,l=s>0?"right":"left",c=a>0?"down":"up",f=Math.abs(s)>w,m=Math.abs(a)>w;if(n.tap)(f||m)&&n.$el.off([g.touchMove,g.touchEnd,g.touchCancel,g.pointerMove,g.pointerUp,g.pointerCancel].join(" "));else if(n.pan||n.scale)if(!n.passed&&n.axis&&(n.axisX&&m||n.axisY&&f))u(t);else{!n.passed&&(!n.axis||n.axis&&n.axisX&&f||n.axisY&&m)&&(n.passed=!0),n.passed&&(y.killEvent(t),y.killEvent(n.startE));var v=!0,b=d(n.scale?g.scale:g.pan,t,r,o,n.scaleD,s,a,l,c);if(n.scale)if(n.touches&&n.touches.length>=2){var x=n.touches;n.pinch.endX=p(x[0].pageX,x[1].pageX),n.pinch.endY=p(x[0].pageY,x[1].pageY),n.pinch.endD=h(x[1].pageX-x[0].pageX,x[1].pageY-x[0].pageY),n.scaleD=n.pinch.endD/n.pinch.startD,b.pageX=n.pinch.endX,b.pageY=n.pinch.endY,b.scale=n.scaleD,b.deltaX=n.pinch.endX-n.pinch.startX,b.deltaY=n.pinch.endY-n.pinch.startY}else n.pan||(v=!1);v&&n.$el.trigger(b)}}function a(t,n){t.on(g.click,n,l);var i=e._data(t[0],"events").click;i.unshift(i.pop())}function l(e){y.killEvent(e,!0),e.data.$links.off(g.click)}function u(t){var n=t.data;if(n.tap)n.$el.off([g.touchMove,g.touchEnd,g.touchCancel,g.pointerMove,g.pointerUp,g.pointerCancel,g.mouseMove,g.mouseUp].join(" ")),n.startE.preventDefault(),c(t);else if(n.pan||n.scale){var i="undefined"!==e.type(n.touches)?n.touches[0]:null,r=i?i.pageX:t.pageX,o=i?i.pageY:t.pageY,s=r-n.startX,l=o-n.startY,u=(new Date).getTime(),p=n.scale?g.scaleEnd:g.panEnd,h=s>0?"right":"left",f=l>0?"down":"up",m=Math.abs(s)>1,v=Math.abs(l)>1;if(n.swipe&&Math.abs(s)>w&&u-n.startT<x&&(p=g.swipe),n.axis&&(n.axisX&&v||n.axisY&&m)||m||v){n.$links=n.$el.find("a");for(var y=0,C=n.$links.length;C>y;y++)a(n.$links.eq(y),n)}var k=d(p,t,r,o,n.scaleD,s,l,h,f);b.off([g.touchMove,g.touchEnd,g.touchCancel,g.mouseMove,g.mouseUp,g.pointerMove,g.pointerUp,g.pointerCancel].join(" ")),n.$el.trigger(k),n.touches=[],n.scale}n.touching=!1}function c(e){y.killEvent(e);var t=e.data;if(!t.clicked){"click"!==e.type&&(t.clicked=!0);var n=t.startE?t.startX:e.pageX,i=t.startE?t.startY:e.pageY,r=d(g.tap,e.originalEvent,n,i,1,0,0);t.$el.trigger(r)}}function d(t,n,i,r,o,s,a,l,u){return e.Event(t,{originalEvent:n,bubbles:!0,pageX:i,pageY:r,scale:o,deltaX:s,deltaY:a,directionX:l,directionY:u})}function p(e,t){return(e+t)/2}function h(e,t){return Math.sqrt(e*e+t*t)}function f(e,t){e.css({"-ms-touch-action":t,"touch-action":t})}var m=!t.window.PointerEvent,v=t.Plugin("touch",{widget:!0,defaults:{axis:!1,pan:!1,scale:!1,swipe:!1,tap:!1},methods:{_construct:n,_destruct:i},events:{pointerDown:m?"MSPointerDown":"pointerdown",pointerUp:m?"MSPointerUp":"pointerup",pointerMove:m?"MSPointerMove":"pointermove",pointerCancel:m?"MSPointerCancel":"pointercancel"}}),g=v.events,y=v.functions,b=t.$window,w=10,x=50;g.tap="tap",g.pan="pan",g.panStart="panstart",g.panEnd="panend",g.scale="scale",g.scaleStart="scalestart",g.scaleEnd="scaleend",g.swipe="swipe"}(jQuery,Formstone),!function(e,t){"use strict";function n(e,n){if(n){e.$target=this.find(e.target),e.$check=e.target?e.$target:this,e.callback=n,e.styles=a(e.$check),e.timer=null;var i=e.$check.css(t.transition+"-duration"),o=parseFloat(i);t.support.transition&&i&&o?this.on(c.transitionEnd,e,r):e.timer=d.startTimer(e.timer,50,function(){s(e)},!0)}}function i(e){d.clearTimer(e.timer,!0),this.off(c.namespace)}function r(t){t.stopPropagation(),t.preventDefault();var n=t.data,i=t.originalEvent,r=n.target?n.$target:n.$el;n.property&&i.propertyName!==n.property||!e(i.target).is(r)||o(n)}function o(e){e.always||e.$el[u.namespace]("destroy"),e.callback.apply(e.$el)}function s(e){var t=a(e.$check);l(e.styles,t)||o(e),e.styles=t}function a(t){var n,i,r,o={};if(t instanceof e&&(t=t[0]),p.getComputedStyle){n=p.getComputedStyle(t,null);for(var s=0,a=n.length;a>s;s++)i=n[s],r=n.getPropertyValue(i),o[i]=r}else if(t.currentStyle){n=t.currentStyle;for(i in n)n[i]&&(o[i]=n[i])}return o}function l(t,n){if(e.type(t)!==e.type(n))return!1;for(var i in t)if(!t.hasOwnProperty(i)||!n.hasOwnProperty(i)||t[i]!==n[i])return!1;return!0}var u=t.Plugin("transition",{widget:!0,defaults:{always:!1,property:null,target:null},methods:{_construct:n,_destruct:i,resolve:o}}),c=u.events,d=u.functions,p=t.window}(jQuery,Formstone),!function(e,t){"use strict";function n(){A=t.$body}function i(n){n.multiple=this.prop("multiple"),n.disabled=this.is(":disabled"),n.multiple?n.links=!1:n.external&&(n.links=!0);var i=this.find(":selected").not(":disabled"),r=i.text(),o=this.find("option").index(i);n.multiple||""===n.label?n.label="":(i=this.prepend('<option value="" class="'+T.item_placeholder+'" selected>'+n.label+"</option>"),r=n.label,o=0);var s=this.find("option, optgroup"),a=s.filter("option");n.tabIndex=this[0].tabIndex,this[0].tabIndex=-1;var c=[T.base,n.customClass];n.mobile||t.isMobile?c.push(T.mobile):n.cover&&c.push(T.cover),n.multiple&&c.push(T.multiple),n.disabled&&c.push(T.disabled);var d='<div class="'+c.join(" ")+'" tabindex="'+n.tabIndex+'"></div>',p="";n.multiple||(p+='<button type="button" class="'+T.selected+'">',p+=e("<span></span>").text(k(r,n.trim)).html(),p+="</button>"),p+='<div class="'+T.options+'">',p+="</div>",this.wrap(d).after(p),n.$dropdown=this.parent(_.base),n.$allOptions=s,n.$options=a,n.$selected=n.$dropdown.find(_.selected),n.$wrapper=n.$dropdown.find(_.options),n.$placeholder=n.$dropdown.find(_.placeholder),n.index=-1,n.guid=S++,n.closed=!0,n.keyDownGUID=O.keyDown+n.guid,n.clickGUID=O.click+n.guid,l(n),n.multiple||b(o,n),n.$selected.touch({tap:!0}).on(O.tap,n,u),n.$dropdown.on(O.click,_.item,n,f).on(O.close,n,h),this.on(O.change,n,m),t.isMobile||(n.$dropdown.on(O.focus,n,v).on(O.blur,n,g),this.on(O.focus,n,function(e){e.data.$dropdown.trigger(O.raw.focus)}))}function r(e){e.$dropdown.hasClass(T.open)&&e.$selected.trigger(O.click),e.$el[0].tabIndex=e.tabIndex,e.$dropdown.off(O.namespace),e.$options.off(O.namespace),e.$placeholder.remove(),e.$selected.remove(),e.$wrapper.remove(),e.$el.off(O.namespace).show().unwrap()}function o(e,t){if("undefined"!=typeof t){var n=e.$items.index(e.$items.filter("[data-value="+t+"]"));e.$items.eq(n).addClass(T.item_disabled),e.$options.eq(n).prop("disabled",!0)}else e.$dropdown.hasClass(T.open)&&e.$selected.trigger(O.click),e.$dropdown.addClass(T.disabled),e.$el.prop("disabled",!0),e.disabled=!0}function s(e,t){if("undefined"!=typeof t){var n=e.$items.index(e.$items.filter("[data-value="+t+"]"));e.$items.eq(n).removeClass(T.item_disabled),e.$options.eq(n).prop("disabled",!1)}else e.$dropdown.removeClass(T.disabled),e.$el.prop("disabled",!1),e.disabled=!1}function a(e){var t=e.index;e.$allOptions=e.$el.find("option, optgroup"),e.$options=e.$allOptions.filter("option"),e.index=-1,t=e.$options.index(e.$options.filter(":selected")),l(e),e.multiple||b(t,e)}function l(t){for(var n="",i=0,r=0,o=t.$allOptions.length;o>r;r++){var s=t.$allOptions.eq(r),a=[];if("OPTGROUP"===s[0].tagName)a.push(T.group),s.is(":disabled")&&a.push(T.disabled),n+='<span class="'+a.join(" ")+'">'+s.attr("label")+"</span>";else{var l=s.val();s.attr("value")||s.attr("value",l),a.push(T.item),s.hasClass(T.item_placeholder)&&a.push(T.item_placeholder),s.is(":selected")&&a.push(T.item_selected),s.is(":disabled")&&a.push(T.item_disabled),n+='<button type="button" class="'+a.join(" ")+'" ',n+='data-value="'+l+'">',n+=e("<span></span>").text(k(s.text(),t.trim)).html(),n+="</button>",i++}}t.$items=t.$wrapper.html(n).find(_.item)}function u(e){P.killEvent(e);var n=e.data;if(!n.disabled)if(n.mobile||!t.isMobile||t.isFirefoxMobile)n.closed?c(n):d(n);else{var i=n.$el[0];if(M.createEvent){var r=M.createEvent("MouseEvents");r.initMouseEvent("mousedown",!1,!0,D,0,0,0,0,0,!1,!1,!1,!1,0,null),i.dispatchEvent(r)}else i.fireEvent&&i.fireEvent("onmousedown")}}function c(t){if(t.closed){e(_.base).not(t.$dropdown).trigger(O.close,[t]);var n=t.$dropdown.offset(),i=A.outerHeight(),r=t.$wrapper.outerHeight(!0);t.index>=0?t.$items.eq(t.index).position():{left:0,top:0},n.top+r>i&&t.$dropdown.addClass(T.bottom),A.on(t.clickGUID,":not("+_.options+")",t,p),t.$dropdown.addClass(T.open),w(t),t.closed=!1}}function d(e){e&&!e.closed&&(A.off(e.clickGUID),e.$dropdown.removeClass([T.open,T.bottom].join(" ")),e.closed=!0)}function p(t){P.killEvent(t);var n=t.data;n&&0===e(t.currentTarget).parents(_.base).length&&d(n)}function h(e){var t=e.data;t&&d(t)}function f(t){P.killEvent(t);var n=e(this),i=t.data;if(!i.disabled){if(i.$wrapper.is(":visible")){var r=i.$items.index(n);r!==i.index&&(b(r,i),x(i))}i.multiple||d(i)}}function m(t,n){var i=e(this),r=t.data;if(!n&&!r.multiple){var o=r.$options.index(r.$options.filter("[value='"+I(i.val())+"']"));b(o,r),x(r)}}function v(e){P.killEvent(e);var t=e.data;t.disabled||t.multiple||t.$dropdown.addClass(T.focus).on(t.keyDownGUID,t,y)}function g(e){P.killEvent(e);var t=e.data;t.$dropdown.removeClass(T.focus).off(t.keyDownGUID),t.multiple||d(t)}function y(n){var i=n.data;if(13===n.keyCode)i.closed||(d(i),b(i.index,i)),x(i);else if(!(9===n.keyCode||n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)){P.killEvent(n);var r=i.$items.length-1,o=i.index<0?0:i.index;if(e.inArray(n.keyCode,t.isFirefox?[38,40,37,39]:[38,40])>-1)o+=38===n.keyCode||t.isFirefox&&37===n.keyCode?-1:1,0>o&&(o=0),o>r&&(o=r);else{var s,a,l=String.fromCharCode(n.keyCode).toUpperCase();for(a=i.index+1;r>=a;a++)if(s=i.$options.eq(a).text().charAt(0).toUpperCase(),s===l){o=a;break}if(0>o||o===i.index)for(a=0;r>=a;a++)if(s=i.$options.eq(a).text().charAt(0).toUpperCase(),s===l){o=a;break}}o>=0&&(b(o,i),w(i))}}function b(e,t){var n=t.$items.eq(e),i=t.$options.eq(e),r=n.hasClass(T.item_selected),o=n.hasClass(T.item_disabled);if(!o)if(t.multiple)r?(i.prop("selected",null),n.removeClass(T.item_selected)):(i.prop("selected",!0),n.addClass(T.item_selected));else if(e>-1&&e<t.$items.length){var s=i.data("label")||n.html();t.$selected.html(s).removeClass(_.item_placeholder),t.$items.filter(_.item_selected).removeClass(T.item_selected),t.$el[0].selectedIndex=e,n.addClass(T.item_selected),t.index=e}else""!==t.label&&t.$selected.html(t.label)}function w(e){var t=e.$items.eq(e.index),n=e.index>=0&&!t.hasClass(_.item_placeholder)?t.position():{left:0,top:0};e.$wrapper.scrollTop(e.$wrapper.scrollTop()+n.top)}function x(e){e.links?C(e):e.$el.trigger(O.raw.change,[!0])}function C(e){var t=e.$el.val();e.external?D.open(t):D.location.href=t}function k(e,t){return 0===t?e:e.length>t?e.substring(0,t)+"...":e}function I(e){return"string"==typeof e?e.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"):e}var E=t.Plugin("dropdown",{widget:!0,defaults:{cover:!1,customClass:"",label:"",external:!1,links:!1,mobile:!1,trim:0},methods:{_setup:n,_construct:i,_destruct:r,disable:o,enable:s,update:a,open:c,close:d},classes:["cover","bottom","multiple","mobile","open","disabled","focus","selected","options","group","item","item_disabled","item_selected","item_placeholder"],events:{tap:"tap",close:"close"}}),_=E.classes,T=_.raw,O=E.events,P=E.functions,S=0,D=t.window,M=(t.$window,t.document),A=null}(jQuery,Formstone),!function(e,t){"use strict";function n(t){t=t||{};for(var n in b)b.hasOwnProperty(n)&&(d[n]=t[n]?e.merge(t[n],d[n]):d[n]);d=e.extend(d,t),d.minWidth.sort(m.sortDesc),d.maxWidth.sort(m.sortAsc),d.minHeight.sort(m.sortDesc),d.maxHeight.sort(m.sortAsc);for(var i in b)if(b.hasOwnProperty(i)){y[i]={};for(var r in d[i])if(d[i].hasOwnProperty(r)){var o=window.matchMedia("("+b[i]+": "+(d[i][r]===1/0?1e5:d[i][r])+d.unit+")");o.addListener(s),y[i][d[i][r]]=o}}s()}function i(e,t,n){var i=f.matchMedia(t),r=l(i.media);g[r]||(g[r]={mq:i,active:!0,enter:{},leave:{}},g[r].mq.addListener(a));for(var o in n)n.hasOwnProperty(o)&&g[r].hasOwnProperty(o)&&(g[r][o][e]=n[o]);a(g[r].mq)}function r(e,t){if(e)if(t){var n=l(t);g[n]&&(g[n].enter[e]&&delete g[n].enter[e],g[n].leave[e]&&delete g[n].leave[e])}else for(var i in g)g.hasOwnProperty(i)&&(g[i].enter[e]&&delete g[i].enter[e],g[i].leave[e]&&delete g[i].leave[e])}function o(){v={unit:d.unit};for(var e in b)if(b.hasOwnProperty(e))for(var t in y[e])if(y[e].hasOwnProperty(t)&&y[e][t].matches){var n="Infinity"===t?1/0:parseInt(t,10);e.indexOf("max")>-1?(!v[e]||n<v[e])&&(v[e]=n):(!v[e]||n>v[e])&&(v[e]=n)}}function s(){o(),h.trigger(p.mqChange,[v])}function a(e){var t=l(e.media),n=g[t],i=e.matches?p.enter:p.leave;if(n&&n.active||!n.active&&e.matches){for(var r in n[i])n[i].hasOwnProperty(r)&&n[i][r].apply(n.mq);n.active=!0}}function l(e){return e.replace(/[^a-z0-9\s]/gi,"").replace(/[_\s]/g,"").replace(/^\s+|\s+$/g,"")}function u(){return v}var c=t.Plugin("mediaquery",{utilities:{_initialize:n,state:u,bind:i,unbind:r},events:{mqChange:"mqchange"}}),d={minWidth:[0],maxWidth:[1/0],minHeight:[0],maxHeight:[1/0],unit:"px"},p=e.extend(c.events,{enter:"enter",leave:"leave"}),h=t.$window,f=h[0],m=c.functions,v=null,g=[],y={},b={minWidth:"min-width",maxWidth:"max-width",minHeight:"min-height",maxHeight:"max-height"}}(jQuery,Formstone),!function(e,t){"use strict";function n(t){t.guid="__"+f++,t.enabled=!1,t.active=!1,t.classes=e.extend(!0,{},d,t.classes),t.target=this.data(c+"-target"),t.$target=e(t.target).addClass(t.classes.raw.target),t.linked=this.data(c+"-linked"),t.mq="(max-width:"+(t.maxWidth===1/0?"100000px":t.maxWidth)+")",t.mqGuid=t.classes.raw.base+"__"+f++;var n=this.data(c+"-group");t.group=n?"[data-"+c+'-group="'+n+'"]':!1,!t.collapse&&t.group&&e(t.group).eq(0).attr("data-"+c+"-active","true"),t.onEnable=this.data(c+"-active"),t.$swaps=e().add(this).add(t.$target),this.touch({tap:!0}).on(p.tap+t.guid,t,l),e.mediaquery("bind",t.mqGuid,t.mq,{enter:function(){s.call(t.$el,t)},leave:function(){a.call(t.$el,t)}})}function i(t){e.mediaquery("unbind",t.mqGuid,t.mq),t.$swaps.removeClass([t.classes.raw.enabled,t.classes.raw.active].join(" ")).off(p.namespace),this.touch("destroy")}function r(t,n){if(t.enabled&&!t.active){e(t.group).not(t.$el)[u.namespace]("deactivate");var i=t.group?e(t.group).index(t.$el):null;t.$swaps.addClass(t.classes.raw.active),t.linked&&!n&&e(t.linked).not(t.$el).swap("activate",!0),this.trigger(p.activate,[i]),t.active=!0}}function o(t,n){t.enabled&&t.active&&(t.$swaps.removeClass(t.classes.raw.active),t.linked&&!n&&e(t.linked).not(t.$el).swap("deactivate",!0),this.trigger(p.deactivate),t.active=!1)}function s(t,n){t.enabled||(t.$swaps.addClass(t.classes.raw.enabled),n||e(t.linked).not(t.$el).swap("enable"),t.enabled=!0,this.trigger(p.enable),t.onEnable?(t.active=!0,t.$swaps.addClass(t.classes.raw.active)):(t.active=!0,o.call(this,t)))}function a(t,n){t.enabled&&(t.$swaps.removeClass([t.classes.raw.enabled,t.classes.raw.active].join(" ")),n||e(t.linked).not(t.$el).swap("disable"),this.trigger(p.disable),t.enabled=!1)}function l(e){h.killEvent(e);var t=e.data;t.active&&t.collapse?o.call(t.$el,t):r.call(t.$el,t)}var u=t.Plugin("swap",{widget:!0,defaults:{collapse:!0,maxWidth:1/0},classes:["target","enabled","active"],events:{tap:"tap",activate:"activate",deactivate:"deactivate",enable:"enable",disable:"disable"},methods:{_construct:n,_destruct:i,activate:r,deactivate:o,enable:s,disable:a}}),c=u.namespace,d=u.classes,p=u.events,h=u.functions,f=0}(jQuery,Formstone),!function(e,t){"use strict";function n(){h.iterate.call(m,s)}function i(){m=e(d.element)}function r(t){t.maxWidth=t.maxWidth===1/0?"100000px":t.maxWidth,t.mq="(min-width:"+t.minWidth+") and (max-width:"+t.maxWidth+")",t.mqGuid=p.base+"__"+f++,t.type="height"===t.property?"outerHeight":"outerWidth",t.target?e.isArray(t.target)||(t.target=[t.target]):t.target=["> *"],i(),e.mediaquery("bind",t.mqGuid,t.mq,{enter:function(){l.call(t.$el,t)},leave:function(){a.call(t.$el,t)}})}function o(e){u(e),i()}function s(e){if(e.enabled)for(var t,n,i,r=0;r<e.target.length;r++){t=0,n=0,i=e.$el.find(e.target[r]),i.css(e.property,"");for(var o=0;o<i.length;o++)n=i.eq(o)[e.type](),n>t&&(t=n);i.css(e.property,t)}}function a(e){e.enabled&&(e.enabled=!1,u(e))}function l(e){e.enabled||(e.enabled=!0,s(e))}function u(e){for(var t=0;t<e.target.length;t++)e.$el.find(e.target[t]).css(e.property,"")}var c=t.Plugin("equalize",{widget:!0,priority:5,defaults:{maxWidth:1/0,minWidth:"0px",property:"height",target:null},methods:{_construct:r,_destruct:o,_resize:n}}),d=c.classes,p=d.raw,h=c.functions,f=0,m=[]}(jQuery,Formstone),!function(e,t){"use strict";function n(){P.iterate.call(D,l)}function i(){D=e(_.base)}function r(n){var r;n.maxWidth=n.maxWidth===1/0?"100000px":n.maxWidth,n.mq="(min-width:"+n.minWidth+") and (max-width:"+n.maxWidth+")",n.mqGuid=T.base+"__"+S++,t.support.transform||(n.useMargin=!0);var o="",l="";if(n.controls&&(o+='<div class="'+T.controls+'">',o+='<button type="button" class="'+[T.control,T.control_previous].join(" ")+'">'+n.labels.previous+"</button>",o+='<button type="button" class="'+[T.control,T.control_next].join(" ")+'">'+n.labels.next+"</button>",o+="</div>"),n.pagination&&(l+='<div class="'+T.pagination+'">',l+="</div>"),this.addClass([T.base,n.customClass].join(" ")).wrapInner('<div class="'+T.wrapper+'"><div class="'+T.container+'"><div class="'+T.canister+'"></div></div></div>').append(o).wrapInner('<div class="'+T.viewport+'"></div>').append(l),n.$viewport=this.find(_.viewport).eq(0),n.$container=this.find(_.container).eq(0),n.$canister=this.find(_.canister).eq(0),n.$controls=this.find(_.controls).eq(0),n.$pagination=this.find(_.pagination).eq(0),n.$items=n.$canister.children().addClass(T.item),n.$controlItems=n.$controls.find(_.control),n.$paginationItems=n.$pagination.find(_.page),n.$images=n.$canister.find("img"),n.index=0,n.enabled=!1,n.leftPosition=0,n.totalImages=n.$images.length,n.autoTimer=null,"object"===e.type(n.show)){var u=n.show,c=[];for(r in u)u.hasOwnProperty(r)&&c.push(r);c.sort(P.sortAsc),n.show={};for(r in c)c.hasOwnProperty(r)&&(n.show[c[r]]={width:parseInt(c[r]),count:u[c[r]]})}if(e.mediaquery("bind",n.mqGuid,n.mq,{enter:function(){a.call(n.$el,n)},leave:function(){s.call(n.$el,n)}}),n.totalImages>0)for(n.loadedImages=0,r=0;r<n.totalImages;r++){var d=n.$images.eq(r);d.one(O.load,n,h),(d[0].complete||d[0].height)&&d.trigger(O.load)}n.autoAdvance&&(n.autoTimer=P.startTimer(n.autoTimer,n.autoTime,function(){f(n)},!0)),i()}function o(t){P.clearTimer(t.autoTimer),s.call(this,t),e.mediaquery("unbind",t.mqGuid,t.mq),t.$items.removeClass([T.item,T.visible].join(" ")).unwrap().unwrap(),t.pagination&&t.$pagination.remove(),t.controls&&t.$controls.remove(),this.removeClass([T.base,T.enabled,T.animated,t.customClass].join(" ")),i()}function s(e){e.enabled&&(P.clearTimer(e.autoTimer),e.enabled=!1,this.removeClass([T.enabled,T.animated].join(" ")).off(O.namespace),e.$canister.touch("destroy").off(O.namespace).attr("style","").css(A,"none"),e.$items.css({width:"",height:""}),e.$controls.removeClass(T.visible),e.$pagination.removeClass(T.visible).html(""),e.useMargin?e.$canister.css({marginLeft:""}):e.$canister.css(M,""),e.index=0)}function a(e){e.enabled||(e.enabled=!0,this.addClass(T.enabled).on(O.clickTouchStart,_.control,e,m).on(O.clickTouchStart,_.page,e,v),e.$canister.touch({axis:"x",pan:!0,swipe:!0}).on(O.panStart,e,w).on(O.pan,e,x).on(O.panEnd,e,C).on(O.swipe,e,k).css(A,""),l.call(this,e))}function l(e){if(e.enabled){var t,n,i,r,o;if(e.count=e.$items.length,e.count<1)return;for(this.removeClass(T.animated),e.containerWidth=e.$container.outerWidth(!1),e.visible=b(e),e.perPage=e.paged?1:e.visible,e.itemMargin=parseInt(e.$items.eq(0).css("marginRight"))+parseInt(e.$items.eq(0).css("marginLeft")),e.itemWidth=(e.containerWidth-e.itemMargin*(e.visible-1))/e.visible,e.itemHeight=0,e.pageWidth=e.paged?e.itemWidth:e.containerWidth,e.pageCount=Math.ceil(e.count/e.perPage),e.$canister.css({width:(e.pageWidth+e.itemMargin)*e.pageCount}),e.$items.css({width:e.itemWidth,height:""}).removeClass(T.visible),e.pages=[],t=0,n=0;t<e.count;t+=e.perPage)i=e.$items.slice(t,t+e.perPage),i.length<e.perPage&&(i=0===t?e.$items:e.$items.slice(e.$items.length-e.perPage)),r=i.eq(0),o=r.outerHeight(),e.pages.push({left:r.position().left,height:o,$items:i}),o>e.itemHeight&&(e.itemHeight=o),n++;e.paged&&(e.pageCount-=e.count%e.visible),e.maxMove=-e.pages[e.pageCount-1].left,e.autoHeight&&e.$items.css({height:e.itemHeight});var s="";for(t=0;t<e.pageCount;t++)s+='<button type="button" class="'+T.page+'">'+(t+1)+"</button>";e.$pagination.html(s),e.pageCount<=1?(e.$controls.removeClass(T.visible),e.$pagination.removeClass(T.visible)):(e.$controls.addClass(T.visible),e.$pagination.addClass(T.visible)),e.$paginationItems=e.$el.find(_.page),g(e,e.index,!1),setTimeout(function(){e.$el.addClass(T.animated)},5)}}function u(e){e.enabled&&(e.$items=e.$canister.children().addClass(T.item),l.call(this,e))}function c(e,t){e.enabled&&(P.clearTimer(e.autoTimer),g(e,t-1))}function d(e){var t=e.index-1;e.infinite&&0>t&&(t=e.pageCount-1),g(e,t)}function p(e){var t=e.index+1;e.infinite&&t>=e.pageCount&&(t=0),g(e,t)}function h(e){var t=e.data;t.loadedImages++,t.loadedImages===t.totalImages&&l.call(t.$el,t)}function f(e){var t=e.index+1;t>=e.pageCount&&(t=0),g(e,t)}function m(t){P.killEvent(t);var n=t.data,i=n.index+(e(t.currentTarget).hasClass(T.control_next)?1:-1);P.clearTimer(n.autoTimer),g(n,i)}function v(t){P.killEvent(t);var n=t.data,i=n.$paginationItems.index(e(t.currentTarget));P.clearTimer(n.autoTimer),g(n,i)}function g(e,t,n){0>t&&(t=e.infinite?e.pageCount-1:0),t>=e.pageCount&&(t=e.infinite?0:e.pageCount-1),e.pages[t]&&(e.leftPosition=-e.pages[t].left),e.leftPosition<e.maxMove&&(e.leftPosition=e.maxMove),(e.leftPosition>0||isNaN(e.leftPosition))&&(e.leftPosition=0),e.useMargin?e.$canister.css({marginLeft:e.leftPosition}):n===!1?(e.$canister.css(A,"none").css(M,"translateX("+e.leftPosition+"px)"),setTimeout(function(){e.$canister.css(A,"")},5)):e.$canister.css(M,"translateX("+e.leftPosition+"px)"),e.$items.removeClass(T.visible),e.pages[t].$items.addClass(T.visible),n!==!1&&t!==e.index&&(e.infinite||t>-1&&t<e.pageCount)&&e.$el.trigger(O.update,[t]),e.index=t,y(e)}function y(e){e.$paginationItems.removeClass(T.active).eq(e.index).addClass(T.active),e.infinite?e.$controlItems.addClass(T.visible):e.pageCount<1?e.$controlItems.removeClass(T.visible):(e.$controlItems.addClass(T.visible),e.index<=0?e.$controlItems.filter(_.control_previous).removeClass(T.visible):(e.index>=e.pageCount||e.leftPosition===e.maxMove)&&e.$controlItems.filter(_.control_next).removeClass(T.visible))}function b(n){if("object"===e.type(n.show)){for(var i in n.show)if(n.show.hasOwnProperty(i)&&t.windowWidth>=n.show[i].width)return n.fill&&n.count<n.show[i].count?n.count:n.show[i].count;return 1}return n.fill&&n.count<n.show?n.count:n.show}function w(e){var t=e.data;if(t.useMargin)t.leftPosition=parseInt(t.$canister.css("marginLeft"));else{var n=t.$canister.css(M).split(",");t.leftPosition=parseInt(n[4])}t.$canister.css(A,"none"),x(e),t.isTouching=!0}function x(e){var t=e.data;t.touchLeft=t.leftPosition+e.deltaX,t.touchLeft>0&&(t.touchLeft=0),t.touchLeft<t.maxMove&&(t.touchLeft=t.maxMove),t.useMargin?t.$canister.css({marginLeft:t.touchLeft}):t.$canister.css(M,"translateX("+t.touchLeft+"px)")}function C(e){var t=e.data,n=e.deltaX>-50&&e.deltaX<50?t.index:t.index+("left"===e.directionX?1:-1);I(t,n)}function k(e){var t=e.data,n=t.index+("left"===e.directionX?1:-1);I(t,n)}function I(e,t){e.$canister.css(A,""),g(e,t),e.isTouching=!1}var E=t.Plugin("carousel",{widget:!0,defaults:{autoAdvance:!1,autoHeight:!1,autoTime:8e3,controls:!0,customClass:"",fill:!1,infinite:!1,labels:{next:"Next",previous:"Previous"},maxWidth:1/0,minWidth:"0px",paged:!1,pagination:!0,show:1,useMargin:!1},classes:["viewport","wrapper","container","canister","item","controls","control","pagination","page","animated","enabled","visible","active","control_previous","control_next"],events:{update:"update",panStart:"panstart",pan:"pan",panEnd:"panend",swipe:"swipe"},methods:{_construct:r,_destruct:o,_resize:n,disable:s,enable:a,jump:c,previous:d,next:p,reset:u,resize:l}}),_=E.classes,T=_.raw,O=E.events,P=E.functions,S=0,D=[],M=t.transform,A=t.transition}(jQuery,Formstone),!function(e,t){"use strict";function n(){C.iterate.call(I,m)}function i(){I=e(b.base)}function r(t){t.guid="__"+E++,t.youTubeGuid=0,t.eventGuid=x.namespace+t.guid,t.rawGuid=w.base+t.guid,t.classGuid="."+t.rawGuid,t.$container=e('<div class="'+w.container+'"></div>').appendTo(this),
this.addClass([w.base,t.customClass].join(" "));var n=t.source;t.source=null,s(t,n,!0),i()}function o(e){e.$container.remove(),this.removeClass([w.base,e.customClass].join(" ")).off(x.namespace),i()}function s(t,n,i){if(n!==t.source){if(t.source=n,t.responsive=!1,t.isYouTube=!1,"object"===e.type(n)&&"string"===e.type(n.video)){var r=n.video.match(/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/ ]{11})/i);r&&r.length>=1&&(t.isYouTube=!0,t.videoId=r[1])}if(t.isYouTube)t.playing=!1,t.playerReady=!1,t.posterLoaded=!1,c(t,n,i);else if("object"===e.type(n)&&n.hasOwnProperty("poster"))u(t,n,i);else{var o=n;if("object"===e.type(n)){var s,d={},p=[];for(s in n)n.hasOwnProperty(s)&&p.push(s);p.sort(C.sortAsc);for(s in p)p.hasOwnProperty(s)&&(d[p[s]]={width:parseInt(p[s]),url:n[p[s]]});t.responsive=!0,t.sources=d,o=a(t)}l(t,o,!1,i)}}else t.$el.trigger(x.loaded)}function a(e){if(e.responsive)for(var n in e.sources)if(e.sources.hasOwnProperty(n)&&t.windowWidth>=e.sources[n].width)return e.sources[n].url;return e.source}function l(t,n,i,r){var o=[w.media,w.image,r!==!0?w.animated:""].join(" "),s=e('<div class="'+o+'"><img></div>'),a=s.find("img"),l=n;a.one(x.load,function(){_&&s.addClass(w["native"]).css({backgroundImage:"url('"+l+"')"}),s.transition({property:"opacity"},function(){i||d(t)}).css({opacity:1}),v(t),(!i||r)&&t.$el.trigger(x.loaded)}).attr("src",l),t.responsive&&s.addClass(w.responsive),t.$container.append(s),(a[0].complete||4===a[0].readyState)&&a.trigger(x.load),t.currentSource=l}function u(n,i,r){if(n.source&&n.source.poster&&(l(n,n.source.poster,!0,!0),r=!1),!t.isMobile){var o=[w.media,w.video,r!==!0?w.animated:""].join(" "),s='<div class="'+o+'">';s+="<video",n.loop&&(s+=" loop"),n.mute&&(s+=" muted"),s+=">",n.source.webm&&(s+='<source src="'+n.source.webm+'" type="video/webm" />'),n.source.mp4&&(s+='<source src="'+n.source.mp4+'" type="video/mp4" />'),n.source.ogg&&(s+='<source src="'+n.source.ogg+'" type="video/ogg" />'),s+="</video>",s+="</div>";var a=e(s),u=a.find("video");u.one(x.loadedMetaData,function(){a.transition({property:"opacity"},function(){d(n)}).css({opacity:1}),v(n),n.$el.trigger(x.loaded),n.autoPlay&&this.play()}),n.$container.append(a)}}function c(n,i,r){if(!n.videoId){var o=i.match(/^.*(?:youtu.be\/|v\/|e\/|u\/\w+\/|embed\/|v=)([^#\&\?]*).*/);n.videoId=o[1]}if(n.posterLoaded||(n.source.poster||(n.source.poster="http://img.youtube.com/vi/"+n.videoId+"/0.jpg"),n.posterLoaded=!0,l(n,n.source.poster,!0,r),r=!1),!t.isMobile)if(e("script[src*='youtube.com/iframe_api']").length||e("head").append('<script src="//www.youtube.com/iframe_api"></script>'),T){var s=n.guid+"_"+n.youTubeGuid++,a=[w.media,w.embed,r!==!0?w.animated:""].join(" "),u='<div class="'+a+'">';u+='<div id="'+s+'"></div>',u+="</div>";var c=e(u),p=e.extend(!0,{},{controls:0,rel:0,showinfo:0,wmode:"transparent",enablejsapi:1,version:3,playerapiid:s,loop:n.loop?1:0,autoplay:1,origin:k.location.protocol+"//"+k.location.host},n.youtubeOptions);n.$container.append(c),n.player&&(n.oldPlayer=n.player,n.player=null),n.player=new k.YT.Player(s,{videoId:n.videoId,playerVars:p,events:{onReady:function(){n.playerReady=!0,n.mute&&n.player.mute(),n.autoPlay&&n.player.playVideo()},onStateChange:function(e){n.playing||e.data!==k.YT.PlayerState.PLAYING?n.loop&&n.playing&&e.data===k.YT.PlayerState.ENDED&&n.player.playVideo():(n.playing=!0,n.autoPlay||n.player.pauseVideo(),c.transition({property:"opacity"},function(){d(n)}).css({opacity:1}),v(n),n.$el.trigger(x.loaded)),n.$el.find(b.embed).addClass(w.ready)},onPlaybackQualityChange:function(){},onPlaybackRateChange:function(){},onError:function(){},onApiChange:function(){}}}),v(n)}else O.push({data:n,source:i})}function d(e){var t=e.$container.find(b.media);t.length>=1&&(t.not(":last").remove(),e.oldPlayer=null)}function p(e){var t=e.$container.find(b.media);t.length>=1&&t.transition({property:"opacity"},function(){t.remove(),delete e.source}).css({opacity:0})}function h(e){if(e.isYouTube&&e.playerReady)e.player.pauseVideo();else{var t=e.$container.find("video");t.length&&t[0].pause()}}function f(e){if(e.isYouTube&&e.playerReady)e.player.playVideo();else{var t=e.$container.find("video");t.length&&t[0].play()}}function m(e){if(e.responsive){var t=a(e);t!==e.currentSource?l(e,t,!1,!0):v(e)}else v(e)}function v(e){for(var t=e.$container.find(b.media),n=0,i=t.length;i>n;n++){var r=t.eq(n),o=e.isYouTube?"iframe":r.find("video").length?"video":"img",s=r.find(o);if(s.length&&("img"!==o||!_)){var a=e.$el.outerWidth(),l=e.$el.outerHeight(),u=g(e,s);e.width=u.width,e.height=u.height,e.left=0,e.top=0;var c=e.isYouTube?e.embedRatio:e.width/e.height;e.height=l,e.width=e.height*c,e.width<a&&(e.width=a,e.height=e.width/c),e.left=-(e.width-a)/2,e.top=-(e.height-l)/2,r.css({height:e.height,width:e.width,left:e.left,top:e.top})}}}function g(t,n){if(t.isYouTube)return{height:500,width:500/t.embedRatio};if(n.is("img")){var i=n[0];if("undefined"!==e.type(i.naturalHeight))return{height:i.naturalHeight,width:i.naturalWidth};var r=new Image;return r.src=i.src,{height:r.height,width:r.width}}return{height:n[0].videoHeight,width:n[0].videoWidth}}var y=t.Plugin("background",{widget:!0,defaults:{autoPlay:!0,customClass:"",embedRatio:1.777777,loop:!0,mute:!0,source:null,youtubeOptions:{}},classes:["container","media","animated","responsive","native","fixed","ready"],events:{loaded:"loaded",ready:"ready",loadedMetaData:"loadedmetadata"},methods:{_construct:r,_destruct:o,_resize:n,play:f,pause:h,resize:v,load:s,unload:p}}),b=y.classes,w=b.raw,x=y.events,C=y.functions,k=t.window,I=[],E=0,_="backgroundSize"in t.document.documentElement.style,T=!1,O=[];k.onYouTubeIframeAPIReady=function(){T=!0;for(var e in O)O.hasOwnProperty(e)&&c(O[e].data,O[e].source);O=[]}}(jQuery,Formstone),!function(e,t){"use strict";function n(t){var n=this.closest("label"),i=n.length?n.eq(0):e("label[for="+this.attr("id")+"]"),r=[m.base,t.customClass].join(" "),o="";t.radio="radio"===this.attr("type"),t.group=this.attr("name"),o+='<div class="'+m.marker+'">',o+='<div class="'+m.flag+'"></div>',t.toggle&&(r+=" "+m.toggle,o+='<span class="'+[m.state,m.state_on].join(" ")+'">'+t.labels.on+"</span>",o+='<span class="'+[m.state,m.state_off].join(" ")+'">'+t.labels.off+"</span>"),t.radio&&(r+=" "+m.radio),o+="</div>",i.length?i.addClass(m.label).wrap('<div class="'+r+'"></div>').before(o):this.before('<div class=" '+r+'">'+o+"</div>"),t.$checkbox=i.length?i.parents(f.base):this.prev(f.base),t.$marker=t.$checkbox.find(f.marker),t.$states=t.$checkbox.find(f.state),t.$label=i,this.is(":checked")&&t.$checkbox.addClass(m.checked),this.is(":disabled")&&t.$checkbox.addClass(m.disabled),this.wrap('<div class="'+m.element_wrapper+'"></div>'),this.on(v.focus,t,d).on(v.blur,t,p).on(v.change,t,l).on(v.click,t,a).on(v.deselect,t,c),t.$checkbox.touch({tap:!0}).on(v.tap,t,a)}function i(e){e.$checkbox.off(v.namespace).touch("destroy"),e.$marker.remove(),e.$states.remove(),e.$label.unwrap().removeClass(m.label),this.unwrap().off(v.namespace)}function r(e){this.prop("disabled",!1),e.$checkbox.removeClass(m.disabled)}function o(e){this.prop("disabled",!0),e.$checkbox.addClass(m.disabled)}function s(e){var t=e.$el.is(":disabled"),n=e.$el.is(":checked");t||(n?u({data:e}):c({data:e}))}function a(t){t.stopPropagation();var n=t.data;e(t.target).is(n.$el)||(t.preventDefault(),n.$el.trigger("click"))}function l(e){var t=e.data,n=t.$el.is(":disabled"),i=t.$el.is(":checked");n||(t.radio?u(e):i?u(e):c(e))}function u(t){t.data.radio&&e('input[name="'+t.data.group+'"]').not(t.data.$el).trigger("deselect"),t.data.$checkbox.addClass(m.checked)}function c(e){e.data.$checkbox.removeClass(m.checked)}function d(e){e.data.$checkbox.addClass(m.focus)}function p(e){e.data.$checkbox.removeClass(m.focus)}var h=t.Plugin("checkbox",{widget:!0,defaults:{customClass:"",toggle:!1,labels:{on:"ON",off:"OFF"}},classes:["element_wrapper","label","marker","flag","radio","focus","checked","disabled","toggle","state","state_on","state_off"],methods:{_construct:n,_destruct:i,enable:r,disable:o,update:s},events:{deselect:"deselect",tap:"tap"}}),f=h.classes,m=f.raw,v=h.events;h.functions}(jQuery,Formstone),!function(e,t){"use strict";function n(){y=t.$body}function i(e){var t=parseFloat(this.attr("min")),n=parseFloat(this.attr("max"));e.min=t||0===t?t:!1,e.max=n||0===n?n:!1,e.step=parseFloat(this.attr("step"))||1,e.timer=null,e.digits=d(e.step),e.disabled=this.prop("disabled");var i="";i+='<button type="button" class="'+[m.arrow,m.up].join(" ")+'">'+e.labels.up+"</button>",i+='<button type="button" class="'+[m.arrow,m.down].join(" ")+'">'+e.labels.down+"</button>",this.wrap('<div class="'+[m.base,e.customClass,e.disabled?m.disabled:""].join(" ")+'"></div>').after(i),e.$container=this.parent(f.base),e.$arrows=e.$container.find(f.arrow),this.on(v.keyPress,f.element,e,a),e.$container.on([v.touchStart,v.mouseDown].join(" "),f.arrow,e,l)}function r(e){e.$arrows.remove(),this.unwrap().off(v.namespace)}function o(e){e.disabled&&(this.prop("disabled",!1),e.$container.removeClass(m.disabled),e.disabled=!1)}function s(e){e.disabled||(this.prop("disabled",!0),e.$container.addClass(m.disabled),e.disabled=!0)}function a(e){var t=e.data;(38===e.keyCode||40===e.keyCode)&&(e.preventDefault(),c(t,38===e.keyCode?t.step:-t.step))}function l(t){g.killEvent(t),u(t);var n=t.data;if(!n.disabled){var i=e(t.target).hasClass(m.up)?n.step:-n.step;n.timer=g.startTimer(n.timer,110,function(){c(n,i,!1)},!0),c(n,i),y.on([v.touchEnd,v.mouseUp].join(" "),n,u)}}function u(e){g.killEvent(e);var t=e.data;g.clearTimer(t.timer,!0),y.off(v.namespace)}function c(t,n){var i=parseFloat(t.$el.val()),r=n;"undefined"===e.type(i)||isNaN(i)?r=t.min!==!1?t.min:0:t.min!==!1&&i<t.min?r=t.min:r+=i;var o=(r-t.min)%t.step;0!==o&&(r-=o),t.min!==!1&&r<t.min&&(r=t.min),t.max!==!1&&r>t.max&&(r-=t.step),r!==i&&(r=p(r,t.digits),t.$el.val(r).trigger(v.raw.change))}function d(e){var t=String(e);return t.indexOf(".")>-1?t.length-t.indexOf(".")-1:0}function p(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n}var h=t.Plugin("number",{widget:!0,defaults:{customClass:"",labels:{up:"Up",down:"Down"}},classes:["arrow","up","down","disabled"],methods:{_setup:n,_construct:i,_destruct:r,enable:o,disable:s},events:{tap:"tap"}}),f=h.classes,m=f.raw,v=h.events,g=h.functions,y=null}(jQuery,Formstone),function(e,t){"function"==typeof define&&define.amd?define([],function(){return t()}):"object"==typeof exports?module.exports=t():e.Headhesive=t()}(this,function(){"use strict";var e=function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]="object"==typeof n[i]?e(t[i],n[i]):n[i]);return t},t=function(e,t){var n=Date.now||function(){return(new Date).getTime()},i,r,o,s=null,a=0,l=function(){a=n(),s=null,o=e.apply(i,r),i=r=null};return function(){var u=n(),c=t-(u-a);return i=this,r=arguments,0>=c?(clearTimeout(s),s=null,a=u,o=e.apply(i,r),i=r=null):s||(s=setTimeout(l,c)),o}},n=function(){return void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop},i=function(e,t){for(var n=0,i=e.offsetHeight;e;)n+=e.offsetTop,e=e.offsetParent;return"bottom"===t&&(n+=i),n},r=function(t,n){"querySelector"in document&&"addEventListener"in window&&(this.visible=!1,this.options={offset:300,offsetSide:"top",classes:{clone:"headhesive",stick:"headhesive--stick",unstick:"headhesive--unstick"},throttle:250,onInit:function(){},onStick:function(){},onUnstick:function(){},onDestroy:function(){}},this.elem="string"==typeof t?document.querySelector(t):t,this.options=e(this.options,n),this.init())};return r.prototype={constructor:r,init:function(){if(this.clonedElem=this.elem.cloneNode(!0),this.clonedElem.className+=" "+this.options.classes.clone,document.body.insertBefore(this.clonedElem,document.body.firstChild),"number"==typeof this.options.offset)this.scrollOffset=this.options.offset;else{if("string"!=typeof this.options.offset)throw new Error("Invalid offset: "+this.options.offset);this._setScrollOffset()}this._throttleUpdate=t(this.update.bind(this),this.options.throttle),this._throttleScrollOffset=t(this._setScrollOffset.bind(this),this.options.throttle),window.addEventListener("scroll",this._throttleUpdate,!1),window.addEventListener("resize",this._throttleScrollOffset,!1),this.options.onInit.call(this)},_setScrollOffset:function(){"string"==typeof this.options.offset&&(this.scrollOffset=i(document.querySelector(this.options.offset),this.options.offsetSide))},destroy:function(){document.body.removeChild(this.clonedElem),window.removeEventListener("scroll",this._throttleUpdate),window.removeEventListener("resize",this._throttleScrollOffset),this.options.onDestroy.call(this)},stick:function(){this.visible||(this.clonedElem.className=this.clonedElem.className.replace(new RegExp("(^|\\s)*"+this.options.classes.unstick+"(\\s|$)*","g"),""),this.clonedElem.className+=" "+this.options.classes.stick,this.visible=!0,this.options.onStick.call(this))},unstick:function(){this.visible&&(this.clonedElem.className=this.clonedElem.className.replace(new RegExp("(^|\\s)*"+this.options.classes.stick+"(\\s|$)*","g"),""),this.clonedElem.className+=" "+this.options.classes.unstick,this.visible=!1,this.options.onUnstick.call(this))},update:function(){n()>this.scrollOffset?this.stick():this.unstick()}},r}),function(e,t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t(require("jquery")):t(e.jQuery)}(this,function($){function e(e){if(e in c.style)return e;for(var t=["Moz","Webkit","O","ms"],n=e.charAt(0).toUpperCase()+e.substr(1),i=0;i<t.length;++i){var r=t[i]+n;if(r in c.style)return r}}function t(){return c.style[d.transform]="",c.style[d.transform]="rotateY(90deg)",""!==c.style[d.transform]}function n(e){return"string"==typeof e&&this.parse(e),this}function i(e,t,n){t===!0?e.queue(n):t?e.queue(t,n):e.each(function(){n.call(this)})}function r(e){var t=[];return $.each(e,function(e){e=$.camelCase(e),e=$.transit.propertyMap[e]||$.cssProps[e]||e,e=a(e),d[e]&&(e=a(d[e])),-1===$.inArray(e,t)&&t.push(e)}),t}function o(e,t,n,i){var o=r(e);$.cssEase[n]&&(n=$.cssEase[n]);var s=""+u(t)+" "+n;parseInt(i,10)>0&&(s+=" "+u(i));var a=[];return $.each(o,function(e,t){a.push(t+" "+s)}),a.join(", ")}function s(e,t){t||($.cssNumber[e]=!0),$.transit.propertyMap[e]=d.transform,$.cssHooks[e]={get:function(t){var n=$(t).css("transit:transform");return n.get(e)},set:function(t,n){var i=$(t).css("transit:transform");i.setFromString(e,n),$(t).css({"transit:transform":i})}}}function a(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}function l(e,t){return"string"!=typeof e||e.match(/^[\-0-9\.]+$/)?""+e+t:e}function u(e){var t=e;return"string"!=typeof t||t.match(/^[\-0-9\.]+/)||(t=$.fx.speeds[t]||$.fx.speeds._default),l(t,"ms")}$.transit={version:"0.9.12",propertyMap:{marginLeft:"margin",marginRight:"margin",marginBottom:"margin",marginTop:"margin",paddingLeft:"padding",paddingRight:"padding",paddingBottom:"padding",paddingTop:"padding"},enabled:!0,useTransitionEnd:!1};var c=document.createElement("div"),d={},p=navigator.userAgent.toLowerCase().indexOf("chrome")>-1;d.transition=e("transition"),d.transitionDelay=e("transitionDelay"),d.transform=e("transform"),d.transformOrigin=e("transformOrigin"),d.filter=e("Filter"),d.transform3d=t();var h={transition:"transitionend",MozTransition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd",msTransition:"MSTransitionEnd"},f=d.transitionEnd=h[d.transition]||null;for(var m in d)d.hasOwnProperty(m)&&"undefined"==typeof $.support[m]&&($.support[m]=d[m]);return c=null,$.cssEase={_default:"ease","in":"ease-in",out:"ease-out","in-out":"ease-in-out",snap:"cubic-bezier(0,1,.5,1)",easeInCubic:"cubic-bezier(.550,.055,.675,.190)",easeOutCubic:"cubic-bezier(.215,.61,.355,1)",easeInOutCubic:"cubic-bezier(.645,.045,.355,1)",easeInCirc:"cubic-bezier(.6,.04,.98,.335)",easeOutCirc:"cubic-bezier(.075,.82,.165,1)",easeInOutCirc:"cubic-bezier(.785,.135,.15,.86)",easeInExpo:"cubic-bezier(.95,.05,.795,.035)",easeOutExpo:"cubic-bezier(.19,1,.22,1)",easeInOutExpo:"cubic-bezier(1,0,0,1)",easeInQuad:"cubic-bezier(.55,.085,.68,.53)",easeOutQuad:"cubic-bezier(.25,.46,.45,.94)",easeInOutQuad:"cubic-bezier(.455,.03,.515,.955)",easeInQuart:"cubic-bezier(.895,.03,.685,.22)",easeOutQuart:"cubic-bezier(.165,.84,.44,1)",easeInOutQuart:"cubic-bezier(.77,0,.175,1)",easeInQuint:"cubic-bezier(.755,.05,.855,.06)",easeOutQuint:"cubic-bezier(.23,1,.32,1)",easeInOutQuint:"cubic-bezier(.86,0,.07,1)",easeInSine:"cubic-bezier(.47,0,.745,.715)",easeOutSine:"cubic-bezier(.39,.575,.565,1)",easeInOutSine:"cubic-bezier(.445,.05,.55,.95)",easeInBack:"cubic-bezier(.6,-.28,.735,.045)",easeOutBack:"cubic-bezier(.175, .885,.32,1.275)",easeInOutBack:"cubic-bezier(.68,-.55,.265,1.55)"},$.cssHooks["transit:transform"]={get:function(e){return $(e).data("transform")||new n},set:function(e,t){var i=t;i instanceof n||(i=new n(i)),"WebkitTransform"!==d.transform||p?e.style[d.transform]=i.toString():e.style[d.transform]=i.toString(!0),$(e).data("transform",i)}},$.cssHooks.transform={set:$.cssHooks["transit:transform"].set},$.cssHooks.filter={get:function(e){return e.style[d.filter]},set:function(e,t){e.style[d.filter]=t}},$.fn.jquery<"1.8"&&($.cssHooks.transformOrigin={get:function(e){return e.style[d.transformOrigin]},set:function(e,t){e.style[d.transformOrigin]=t}},$.cssHooks.transition={get:function(e){return e.style[d.transition]},set:function(e,t){e.style[d.transition]=t}}),s("scale"),s("scaleX"),s("scaleY"),s("translate"),s("rotate"),s("rotateX"),s("rotateY"),s("rotate3d"),s("perspective"),s("skewX"),s("skewY"),s("x",!0),s("y",!0),n.prototype={setFromString:function(e,t){var i="string"==typeof t?t.split(","):t.constructor===Array?t:[t];i.unshift(e),n.prototype.set.apply(this,i)},set:function(e){var t=Array.prototype.slice.apply(arguments,[1]);this.setter[e]?this.setter[e].apply(this,t):this[e]=t.join(",")},get:function(e){return this.getter[e]?this.getter[e].apply(this):this[e]||0},setter:{rotate:function(e){this.rotate=l(e,"deg")},rotateX:function(e){this.rotateX=l(e,"deg")},rotateY:function(e){this.rotateY=l(e,"deg")},scale:function(e,t){void 0===t&&(t=e),this.scale=e+","+t},skewX:function(e){this.skewX=l(e,"deg")},skewY:function(e){this.skewY=l(e,"deg")},perspective:function(e){this.perspective=l(e,"px")},x:function(e){this.set("translate",e,null)},y:function(e){this.set("translate",null,e)},translate:function(e,t){void 0===this._translateX&&(this._translateX=0),void 0===this._translateY&&(this._translateY=0),null!==e&&void 0!==e&&(this._translateX=l(e,"px")),null!==t&&void 0!==t&&(this._translateY=l(t,"px")),this.translate=this._translateX+","+this._translateY}},getter:{x:function(){return this._translateX||0},y:function(){return this._translateY||0},scale:function(){var e=(this.scale||"1,1").split(",");return e[0]&&(e[0]=parseFloat(e[0])),e[1]&&(e[1]=parseFloat(e[1])),e[0]===e[1]?e[0]:e},rotate3d:function(){for(var e=(this.rotate3d||"0,0,0,0deg").split(","),t=0;3>=t;++t)e[t]&&(e[t]=parseFloat(e[t]));return e[3]&&(e[3]=l(e[3],"deg")),e}},parse:function(e){var t=this;e.replace(/([a-zA-Z0-9]+)\((.*?)\)/g,function(e,n,i){t.setFromString(n,i)})},toString:function(e){var t=[];for(var n in this)if(this.hasOwnProperty(n)){if(!d.transform3d&&("rotateX"===n||"rotateY"===n||"perspective"===n||"transformOrigin"===n))continue;"_"!==n[0]&&(e&&"scale"===n?t.push(n+"3d("+this[n]+",1)"):e&&"translate"===n?t.push(n+"3d("+this[n]+",0)"):t.push(n+"("+this[n]+")"))}return t.join(" ")}},$.fn.transition=$.fn.transit=function(e,t,n,r){var s=this,a=0,l=!0,c=$.extend(!0,{},e);"function"==typeof t&&(r=t,t=void 0),"object"==typeof t&&(n=t.easing,a=t.delay||0,l="undefined"==typeof t.queue?!0:t.queue,r=t.complete,t=t.duration),"function"==typeof n&&(r=n,n=void 0),"undefined"!=typeof c.easing&&(n=c.easing,delete c.easing),"undefined"!=typeof c.duration&&(t=c.duration,delete c.duration),"undefined"!=typeof c.complete&&(r=c.complete,delete c.complete),"undefined"!=typeof c.queue&&(l=c.queue,delete c.queue),"undefined"!=typeof c.delay&&(a=c.delay,delete c.delay),"undefined"==typeof t&&(t=$.fx.speeds._default),"undefined"==typeof n&&(n=$.cssEase._default),t=u(t);var p=o(c,t,n,a),h=$.transit.enabled&&d.transition,m=h?parseInt(t,10)+parseInt(a,10):0;if(0===m){var v=function(e){s.css(c),r&&r.apply(s),e&&e()};return i(s,l,v),s}var g={},y=function(e){var t=!1,n=function(){t&&s.unbind(f,n),m>0&&s.each(function(){this.style[d.transition]=g[this]||null}),"function"==typeof r&&r.apply(s),"function"==typeof e&&e()};m>0&&f&&$.transit.useTransitionEnd?(t=!0,s.bind(f,n)):window.setTimeout(n,m),s.each(function(){m>0&&(this.style[d.transition]=p),$(this).css(c)})},b=function(e){this.offsetWidth,y(e)};return i(s,l,b),this},$.transit.getTransitionValue=o,$}),function(){function e(e,n,i,r){return new t(e,n,i,r)}function t(e,t,i,r){this.options=r||{},this.options.adapters=this.options.adapters||{},this.obj=e,this.keypath=t,this.callback=i,this.objectPath=[],this.parse(),n(this.target=this.realize())&&this.set(!0,this.key,this.target,this.callback)}function n(e){return"object"==typeof e&&null!==e}function i(e){throw new Error("[sightglass] "+e)}e.adapters={},t.tokenize=function(e,t,n){var i,r,o=[],s={i:n,path:""};for(i=0;i<e.length;i++)r=e.charAt(i),~t.indexOf(r)?(o.push(s),s={i:r,path:""}):s.path+=r;return o.push(s),o},t.prototype.parse=function(){var n,r,o=this.interfaces();o.length||i("Must define at least one adapter interface."),~o.indexOf(this.keypath[0])?(n=this.keypath[0],r=this.keypath.substr(1)):("undefined"==typeof(n=this.options.root||e.root)&&i("Must define a default root adapter."),r=this.keypath),this.tokens=t.tokenize(r,o,n),this.key=this.tokens.pop()},t.prototype.realize=function(){var e,t=this.obj,i=!1;return this.tokens.forEach(function(r,o){n(t)?("undefined"!=typeof this.objectPath[o]?t!==(e=this.objectPath[o])&&(this.set(!1,r,e,this.update.bind(this)),this.set(!0,r,t,this.update.bind(this)),this.objectPath[o]=t):(this.set(!0,r,t,this.update.bind(this)),this.objectPath[o]=t),t=this.get(r,t)):(i===!1&&(i=o),(e=this.objectPath[o])&&this.set(!1,r,e,this.update.bind(this)))},this),i!==!1&&this.objectPath.splice(i),t},t.prototype.update=function(){var e,t;(e=this.realize())!==this.target&&(n(this.target)&&this.set(!1,this.key,this.target,this.callback),n(e)&&this.set(!0,this.key,e,this.callback),t=this.value(),this.target=e,this.value()!==t&&this.callback())},t.prototype.value=function(){return n(this.target)?this.get(this.key,this.target):void 0},t.prototype.setValue=function(e){n(this.target)&&this.adapter(this.key).set(this.target,this.key.path,e)},t.prototype.get=function(e,t){return this.adapter(e).get(t,e.path)},t.prototype.set=function(e,t,n,i){var r=e?"observe":"unobserve";this.adapter(t)[r](n,t.path,i)},t.prototype.interfaces=function(){var t=Object.keys(this.options.adapters);return Object.keys(e.adapters).forEach(function(e){~t.indexOf(e)||t.push(e)}),t},t.prototype.adapter=function(t){return this.options.adapters[t.i]||e.adapters[t.i]},t.prototype.unobserve=function(){var e;this.tokens.forEach(function(t,n){(e=this.objectPath[n])&&this.set(!1,t,e,this.update.bind(this))},this),n(this.target)&&this.set(!1,this.key,this.target,this.callback)},"undefined"!=typeof module&&module.exports?module.exports=e:"function"==typeof define&&define.amd?define([],function(){return this.sightglass=e}):this.sightglass=e}.call(this),function(){var e,t,n,i,r=function(e,t){return function(){return e.apply(t,arguments)}},o=[].slice,s={}.hasOwnProperty,a=function(e,t){function n(){this.constructor=e}for(var i in t)s.call(t,i)&&(e[i]=t[i]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};e={options:["prefix","templateDelimiters","rootInterface","preloadData","handler"],extensions:["binders","formatters","components","adapters"],"public":{binders:{},components:{},formatters:{},adapters:{},prefix:"rv",templateDelimiters:["{","}"],rootInterface:".",preloadData:!0,handler:function(e,t,n){return this.call(e,t,n.view.models)},configure:function(t){var n,i,r,o;null==t&&(t={});for(r in t)if(o=t[r],"binders"===r||"components"===r||"formatters"===r||"adapters"===r)for(i in o)n=o[i],e[r][i]=n;else e["public"][r]=o},bind:function(t,n,i){var r;return null==n&&(n={}),null==i&&(i={}),r=new e.View(t,n,i),r.bind(),r},init:function(t,n,i){var r,o;return null==i&&(i={}),null==n&&(n=document.createElement("div")),t=e["public"].components[t],n.innerHTML=t.template.call(this,n),r=t.initialize.call(this,n,i),o=new e.View(n,r),o.bind(),o}}},window.jQuery||window.$?(i="on"in jQuery.prototype?["on","off"]:["bind","unbind"],t=i[0],n=i[1],e.Util={bindEvent:function(e,n,i){return jQuery(e)[t](n,i)},unbindEvent:function(e,t,i){return jQuery(e)[n](t,i)},getInputValue:function(e){var t;return t=jQuery(e),"checkbox"===t.attr("type")?t.is(":checked"):t.val()}}):e.Util={bindEvent:function(){return"addEventListener"in window?function(e,t,n){return e.addEventListener(t,n,!1)}:function(e,t,n){return e.attachEvent("on"+t,n)}}(),unbindEvent:function(){return"removeEventListener"in window?function(e,t,n){return e.removeEventListener(t,n,!1)}:function(e,t,n){return e.detachEvent("on"+t,n)}}(),getInputValue:function(e){var t,n,i,r;if("checkbox"===e.type)return e.checked;if("select-multiple"===e.type){for(r=[],n=0,i=e.length;i>n;n++)t=e[n],t.selected&&r.push(t.value);return r}return e.value}},e.TypeParser=function(){function e(){}return e.types={primitive:0,keypath:1},e.parse=function(e){return/^'.*'$|^".*"$/.test(e)?{type:this.types.primitive,value:e.slice(1,-1)}:"true"===e?{type:this.types.primitive,value:!0}:"false"===e?{type:this.types.primitive,value:!1}:"null"===e?{type:this.types.primitive,value:null}:"undefined"===e?{type:this.types.primitive,value:void 0}:isNaN(Number(e))===!1?{type:this.types.primitive,value:Number(e)}:{type:this.types.keypath,value:e}},e}(),e.TextTemplateParser=function(){function e(){}return e.types={text:0,binding:1},e.parse=function(e,t){var n,i,r,o,s,a,l;for(a=[],o=e.length,n=0,i=0;o>i;){if(n=e.indexOf(t[0],i),0>n){a.push({type:this.types.text,value:e.slice(i)});break}if(n>0&&n>i&&a.push({type:this.types.text,value:e.slice(i,n)}),i=n+t[0].length,n=e.indexOf(t[1],i),0>n){s=e.slice(i-t[1].length),r=a[a.length-1],(null!=r?r.type:void 0)===this.types.text?r.value+=s:a.push({type:this.types.text,value:s});break}l=e.slice(i,n).trim(),a.push({type:this.types.binding,value:l}),i=n+t[1].length}return a},e}(),e.View=function(){function t(t,n,i){var o,s,a,l,u,c,d,p,h,f,m,v,g;for(this.els=t,this.models=n,null==i&&(i={}),this.update=r(this.update,this),this.publish=r(this.publish,this),this.sync=r(this.sync,this),this.unbind=r(this.unbind,this),this.bind=r(this.bind,this),this.select=r(this.select,this),this.traverse=r(this.traverse,this),this.build=r(this.build,this),this.buildBinding=r(this.buildBinding,this),this.bindingRegExp=r(this.bindingRegExp,this),this.options=r(this.options,this),this.els.jquery||this.els instanceof Array||(this.els=[this.els]),h=e.extensions,u=0,d=h.length;d>u;u++){if(s=h[u],this[s]={},i[s]){f=i[s];for(o in f)a=f[o],this[s][o]=a}m=e["public"][s];for(o in m)a=m[o],null==(l=this[s])[o]&&(l[o]=a)}for(v=e.options,c=0,p=v.length;p>c;c++)s=v[c],this[s]=null!=(g=i[s])?g:e["public"][s];this.build()}return t.prototype.options=function(){var t,n,i,r,o;for(n={},o=e.extensions.concat(e.options),i=0,r=o.length;r>i;i++)t=o[i],n[t]=this[t];return n},t.prototype.bindingRegExp=function(){return new RegExp("^"+this.prefix+"-")},t.prototype.buildBinding=function(t,n,i,r){var o,s,a,l,u,c,d;return u={},d=function(){var e,t,n,i;for(n=r.split("|"),i=[],e=0,t=n.length;t>e;e++)c=n[e],i.push(c.trim());return i}(),o=function(){var e,t,n,i;for(n=d.shift().split("<"),i=[],e=0,t=n.length;t>e;e++)s=n[e],i.push(s.trim());return i}(),l=o.shift(),u.formatters=d,(a=o.shift())&&(u.dependencies=a.split(/\s+/)),this.bindings.push(new e[t](this,n,i,l,u))},t.prototype.build=function(){var t,n,i,r,o;for(this.bindings=[],n=function(t){return function(i){var r,o,s,a,l,u,c,d,p,h,f,m,v,g;if(3===i.nodeType){if(l=e.TextTemplateParser,(s=t.templateDelimiters)&&(d=l.parse(i.data,s)).length&&(1!==d.length||d[0].type!==l.types.text)){for(p=0,f=d.length;f>p;p++)c=d[p],u=document.createTextNode(c.value),i.parentNode.insertBefore(u,i),1===c.type&&t.buildBinding("TextBinding",u,null,c.value);i.parentNode.removeChild(i)}}else 1===i.nodeType&&(r=t.traverse(i));if(!r){for(v=function(){var e,t,n,r;for(n=i.childNodes,r=[],e=0,t=n.length;t>e;e++)a=n[e],r.push(a);return r}(),g=[],h=0,m=v.length;m>h;h++)o=v[h],g.push(n(o));return g}}}(this),o=this.els,i=0,r=o.length;r>i;i++)t=o[i],n(t);this.bindings.sort(function(e,t){var n,i;return((null!=(n=t.binder)?n.priority:void 0)||0)-((null!=(i=e.binder)?i.priority:void 0)||0)})},t.prototype.traverse=function(t){var n,i,r,o,s,a,l,u,c,d,p,h,f,m,v,g;for(o=this.bindingRegExp(),s="SCRIPT"===t.nodeName||"STYLE"===t.nodeName,m=t.attributes,d=0,h=m.length;h>d;d++)if(n=m[d],o.test(n.name)){if(u=n.name.replace(o,""),!(r=this.binders[u])){v=this.binders;for(a in v)c=v[a],"*"!==a&&-1!==a.indexOf("*")&&(l=new RegExp("^"+a.replace(/\*/g,".+")+"$"),l.test(u)&&(r=c))}r||(r=this.binders["*"]),r.block&&(s=!0,i=[n])}for(g=i||t.attributes,p=0,f=g.length;f>p;p++)n=g[p],o.test(n.name)&&(u=n.name.replace(o,""),this.buildBinding("Binding",t,u,n.value));return s||(u=t.nodeName.toLowerCase(),this.components[u]&&!t._bound&&(this.bindings.push(new e.ComponentBinding(this,t,u)),s=!0)),s},t.prototype.select=function(e){var t,n,i,r,o;for(r=this.bindings,o=[],n=0,i=r.length;i>n;n++)t=r[n],e(t)&&o.push(t);return o},t.prototype.bind=function(){var e,t,n,i,r;for(i=this.bindings,r=[],t=0,n=i.length;n>t;t++)e=i[t],r.push(e.bind());return r},t.prototype.unbind=function(){var e,t,n,i,r;for(i=this.bindings,r=[],t=0,n=i.length;n>t;t++)e=i[t],r.push(e.unbind());return r},t.prototype.sync=function(){var e,t,n,i,r;for(i=this.bindings,r=[],t=0,n=i.length;n>t;t++)e=i[t],r.push("function"==typeof e.sync?e.sync():void 0);return r},t.prototype.publish=function(){var e,t,n,i,r;for(i=this.select(function(e){var t;return null!=(t=e.binder)?t.publishes:void 0}),r=[],t=0,n=i.length;n>t;t++)e=i[t],r.push(e.publish());return r},t.prototype.update=function(e){var t,n,i,r,o,s,a;null==e&&(e={});for(n in e)i=e[n],this.models[n]=i;for(s=this.bindings,a=[],r=0,o=s.length;o>r;r++)t=s[r],a.push("function"==typeof t.update?t.update(e):void 0);return a},t}(),e.Binding=function(){function t(e,t,n,i,o){this.view=e,this.el=t,this.type=n,this.keypath=i,this.options=null!=o?o:{},this.getValue=r(this.getValue,this),this.update=r(this.update,this),this.unbind=r(this.unbind,this),this.bind=r(this.bind,this),this.publish=r(this.publish,this),this.sync=r(this.sync,this),this.set=r(this.set,this),this.eventHandler=r(this.eventHandler,this),this.formattedValue=r(this.formattedValue,this),this.parseTarget=r(this.parseTarget,this),this.observe=r(this.observe,this),this.setBinder=r(this.setBinder,this),this.formatters=this.options.formatters||[],this.dependencies=[],this.formatterObservers={},this.model=void 0,this.setBinder()}return t.prototype.setBinder=function(){var e,t,n,i;if(!(this.binder=this.view.binders[this.type])){i=this.view.binders;for(e in i)n=i[e],"*"!==e&&-1!==e.indexOf("*")&&(t=new RegExp("^"+e.replace(/\*/g,".+")+"$"),t.test(this.type)&&(this.binder=n,this.args=new RegExp("^"+e.replace(/\*/g,"(.+)")+"$").exec(this.type),this.args.shift()))}return this.binder||(this.binder=this.view.binders["*"]),this.binder instanceof Function?this.binder={routine:this.binder}:void 0},t.prototype.observe=function(t,n,i){return e.sightglass(t,n,i,{root:this.view.rootInterface,adapters:this.view.adapters})},t.prototype.parseTarget=function(){var t;return t=e.TypeParser.parse(this.keypath),0===t.type?this.value=t.value:(this.observer=this.observe(this.view.models,this.keypath,this.sync),
this.model=this.observer.target)},t.prototype.formattedValue=function(t){var n,i,r,s,a,l,u,c,d,p,h,f,m,v;for(v=this.formatters,s=p=0,f=v.length;f>p;s=++p){for(a=v[s],r=a.match(/[^\s']+|'([^']|'[^\s])*'|"([^"]|"[^\s])*"/g),l=r.shift(),a=this.view.formatters[l],r=function(){var t,n,o;for(o=[],t=0,n=r.length;n>t;t++)i=r[t],o.push(e.TypeParser.parse(i));return o}(),c=[],n=h=0,m=r.length;m>h;n=++h)i=r[n],c.push(0===i.type?i.value:((d=this.formatterObservers)[s]||(d[s]={}),(u=this.formatterObservers[s][n])?void 0:(u=this.observe(this.view.models,i.value,this.sync),this.formatterObservers[s][n]=u),u.value()));(null!=a?a.read:void 0)instanceof Function?t=a.read.apply(a,[t].concat(o.call(c))):a instanceof Function&&(t=a.apply(null,[t].concat(o.call(c))))}return t},t.prototype.eventHandler=function(e){var t,n;return n=(t=this).view.handler,function(i){return n.call(e,this,i,t)}},t.prototype.set=function(e){var t;return e=this.formattedValue(e instanceof Function&&!this.binder["function"]?e.call(this.model):e),null!=(t=this.binder.routine)?t.call(this,this.el,e):void 0},t.prototype.sync=function(){var e,t;return this.set(function(){var n,i,r,o,s,a,l;if(this.observer){if(this.model!==this.observer.target){for(s=this.dependencies,n=0,r=s.length;r>n;n++)t=s[n],t.unobserve();if(this.dependencies=[],null!=(this.model=this.observer.target)&&(null!=(a=this.options.dependencies)?a.length:void 0))for(l=this.options.dependencies,i=0,o=l.length;o>i;i++)e=l[i],t=this.observe(this.model,e,this.sync),this.dependencies.push(t)}return this.observer.value()}return this.value}.call(this))},t.prototype.publish=function(){var e,t,n,i,r,s,a,l,u;if(this.observer){for(i=this.getValue(this.el),a=this.formatters.slice(0).reverse(),r=0,s=a.length;s>r;r++)t=a[r],e=t.split(/\s+/),n=e.shift(),(null!=(l=this.view.formatters[n])?l.publish:void 0)&&(i=(u=this.view.formatters[n]).publish.apply(u,[i].concat(o.call(e))));return this.observer.setValue(i)}},t.prototype.bind=function(){var e,t,n,i,r,o,s;if(this.parseTarget(),null!=(r=this.binder.bind)&&r.call(this,this.el),null!=this.model&&(null!=(o=this.options.dependencies)?o.length:void 0))for(s=this.options.dependencies,n=0,i=s.length;i>n;n++)e=s[n],t=this.observe(this.model,e,this.sync),this.dependencies.push(t);return this.view.preloadData?this.sync():void 0},t.prototype.unbind=function(){var e,t,n,i,r,o,s,a,l,u;for(null!=(s=this.binder.unbind)&&s.call(this,this.el),null!=(a=this.observer)&&a.unobserve(),l=this.dependencies,r=0,o=l.length;o>r;r++)i=l[r],i.unobserve();this.dependencies=[],u=this.formatterObservers;for(n in u){t=u[n];for(e in t)i=t[e],i.unobserve()}return this.formatterObservers={}},t.prototype.update=function(e){var t,n;return null==e&&(e={}),this.model=null!=(t=this.observer)?t.target:void 0,null!=(n=this.binder.update)?n.call(this,e):void 0},t.prototype.getValue=function(t){return this.binder&&null!=this.binder.getValue?this.binder.getValue.call(this,t):e.Util.getInputValue(t)},t}(),e.ComponentBinding=function(t){function n(e,t,n){var i,o,s,a,u,c,d;for(this.view=e,this.el=t,this.type=n,this.unbind=r(this.unbind,this),this.bind=r(this.bind,this),this.locals=r(this.locals,this),this.component=this.view.components[this.type],this["static"]={},this.observers={},this.upstreamObservers={},o=e.bindingRegExp(),c=this.el.attributes||[],a=0,u=c.length;u>a;a++)i=c[a],o.test(i.name)||(s=this.camelCase(i.name),l.call(null!=(d=this.component["static"])?d:[],s)>=0?this["static"][s]=i.value:this.observers[s]=i.value)}return a(n,t),n.prototype.sync=function(){},n.prototype.update=function(){},n.prototype.publish=function(){},n.prototype.locals=function(){var e,t,n,i,r,o;n={},r=this["static"];for(e in r)i=r[e],n[e]=i;o=this.observers;for(e in o)t=o[e],n[e]=t.value();return n},n.prototype.camelCase=function(e){return e.replace(/-([a-z])/g,function(e){return e[1].toUpperCase()})},n.prototype.bind=function(){var t,n,i,r,o,s,a,l,u,c,d,p,h,f,m,v,g,y,b,w,x;if(!this.bound){f=this.observers;for(n in f)i=f[n],this.observers[n]=this.observe(this.view.models,i,function(e){return function(t){return function(){return e.componentView.models[t]=e.observers[t].value()}}}(this).call(this,n));this.bound=!0}if(null!=this.componentView)return this.componentView.bind();for(this.el.innerHTML=this.component.template.call(this),a=this.component.initialize.call(this,this.el,this.locals()),this.el._bound=!0,s={},m=e.extensions,c=0,p=m.length;p>c;c++){if(o=m[c],s[o]={},this.component[o]){v=this.component[o];for(t in v)l=v[t],s[o][t]=l}g=this.view[o];for(t in g)l=g[t],null==(u=s[o])[t]&&(u[t]=l)}for(y=e.options,d=0,h=y.length;h>d;d++)o=y[d],s[o]=null!=(b=this.component[o])?b:this.view[o];this.componentView=new e.View(this.el,a,s),this.componentView.bind(),w=this.observers,x=[];for(n in w)r=w[n],x.push(this.upstreamObservers[n]=this.observe(this.componentView.models,n,function(e){return function(t,n){return function(){return n.setValue(e.componentView.models[t])}}}(this).call(this,n,r)));return x},n.prototype.unbind=function(){var e,t,n,i,r;n=this.upstreamObservers;for(e in n)t=n[e],t.unobserve();i=this.observers;for(e in i)t=i[e],t.unobserve();return null!=(r=this.componentView)?r.unbind.call(this):void 0},n}(e.Binding),e.TextBinding=function(e){function t(e,t,n,i,o){this.view=e,this.el=t,this.type=n,this.keypath=i,this.options=null!=o?o:{},this.sync=r(this.sync,this),this.formatters=this.options.formatters||[],this.dependencies=[],this.formatterObservers={}}return a(t,e),t.prototype.binder={routine:function(e,t){return e.data=null!=t?t:""}},t.prototype.sync=function(){return t.__super__.sync.apply(this,arguments)},t}(e.Binding),e["public"].binders.text=function(e,t){return null!=e.textContent?e.textContent=null!=t?t:"":e.innerText=null!=t?t:""},e["public"].binders.html=function(e,t){return e.innerHTML=null!=t?t:""},e["public"].binders.show=function(e,t){return e.style.display=t?"":"none"},e["public"].binders.hide=function(e,t){return e.style.display=t?"none":""},e["public"].binders.enabled=function(e,t){return e.disabled=!t},e["public"].binders.disabled=function(e,t){return e.disabled=!!t},e["public"].binders.checked={publishes:!0,priority:2e3,bind:function(t){return e.Util.bindEvent(t,"change",this.publish)},unbind:function(t){return e.Util.unbindEvent(t,"change",this.publish)},routine:function(e,t){var n;return e.checked="radio"===e.type?(null!=(n=e.value)?n.toString():void 0)===(null!=t?t.toString():void 0):!!t}},e["public"].binders.unchecked={publishes:!0,priority:2e3,bind:function(t){return e.Util.bindEvent(t,"change",this.publish)},unbind:function(t){return e.Util.unbindEvent(t,"change",this.publish)},routine:function(e,t){var n;return e.checked="radio"===e.type?(null!=(n=e.value)?n.toString():void 0)!==(null!=t?t.toString():void 0):!t}},e["public"].binders.value={publishes:!0,priority:3e3,bind:function(t){return"INPUT"!==t.tagName||"radio"!==t.type?(this.event="SELECT"===t.tagName?"change":"input",e.Util.bindEvent(t,this.event,this.publish)):void 0},unbind:function(t){return"INPUT"!==t.tagName||"radio"!==t.type?e.Util.unbindEvent(t,this.event,this.publish):void 0},routine:function(e,t){var n,i,r,o,s,a,u;if("INPUT"===e.tagName&&"radio"===e.type)return e.setAttribute("value",t);if(null!=window.jQuery){if(e=jQuery(e),(null!=t?t.toString():void 0)!==(null!=(o=e.val())?o.toString():void 0))return e.val(null!=t?t:"")}else if("select-multiple"===e.type){if(null!=t){for(u=[],i=0,r=e.length;r>i;i++)n=e[i],u.push(n.selected=(s=n.value,l.call(t,s)>=0));return u}}else if((null!=t?t.toString():void 0)!==(null!=(a=e.value)?a.toString():void 0))return e.value=null!=t?t:""}},e["public"].binders["if"]={block:!0,priority:4e3,bind:function(e){var t,n;return null==this.marker?(t=[this.view.prefix,this.type].join("-").replace("--","-"),n=e.getAttribute(t),this.marker=document.createComment(" rivets: "+this.type+" "+n+" "),this.bound=!1,e.removeAttribute(t),e.parentNode.insertBefore(this.marker,e),e.parentNode.removeChild(e)):void 0},unbind:function(){var e;return null!=(e=this.nested)?e.unbind():void 0},routine:function(t,n){var i,r,o,s;if(!!n==!this.bound){if(n){o={},s=this.view.models;for(i in s)r=s[i],o[i]=r;return(this.nested||(this.nested=new e.View(t,o,this.view.options()))).bind(),this.marker.parentNode.insertBefore(t,this.marker.nextSibling),this.bound=!0}return t.parentNode.removeChild(t),this.nested.unbind(),this.bound=!1}},update:function(e){var t;return null!=(t=this.nested)?t.update(e):void 0}},e["public"].binders.unless={block:!0,priority:4e3,bind:function(t){return e["public"].binders["if"].bind.call(this,t)},unbind:function(){return e["public"].binders["if"].unbind.call(this)},routine:function(t,n){return e["public"].binders["if"].routine.call(this,t,!n)},update:function(t){return e["public"].binders["if"].update.call(this,t)}},e["public"].binders["on-*"]={"function":!0,priority:1e3,unbind:function(t){return this.handler?e.Util.unbindEvent(t,this.args[0],this.handler):void 0},routine:function(t,n){return this.handler&&e.Util.unbindEvent(t,this.args[0],this.handler),e.Util.bindEvent(t,this.args[0],this.handler=this.eventHandler(n))}},e["public"].binders["each-*"]={block:!0,priority:4e3,bind:function(e){var t,n,i,r,o;if(null==this.marker)t=[this.view.prefix,this.type].join("-").replace("--","-"),this.marker=document.createComment(" rivets: "+this.type+" "),this.iterated=[],e.removeAttribute(t),e.parentNode.insertBefore(this.marker,e),e.parentNode.removeChild(e);else for(o=this.iterated,i=0,r=o.length;r>i;i++)n=o[i],n.bind()},unbind:function(){var e,t,n,i,r;if(null!=this.iterated){for(i=this.iterated,r=[],t=0,n=i.length;n>t;t++)e=i[t],r.push(e.unbind());return r}},routine:function(t,n){var i,r,o,s,a,l,u,c,d,p,h,f,m,v,g,y,b,w,x,C,k;if(u=this.args[0],n=n||[],this.iterated.length>n.length)for(w=Array(this.iterated.length-n.length),f=0,g=w.length;g>f;f++)o=w[f],h=this.iterated.pop(),h.unbind(),this.marker.parentNode.removeChild(h.els[0]);for(s=m=0,y=n.length;y>m;s=++m)if(l=n[s],r={index:s},r[u]=l,null==this.iterated[s]){x=this.view.models;for(a in x)l=x[a],null==r[a]&&(r[a]=l);d=this.iterated.length?this.iterated[this.iterated.length-1].els[0]:this.marker,c=this.view.options(),c.preloadData=!0,p=t.cloneNode(!0),h=new e.View(p,r,c),h.bind(),this.iterated.push(h),this.marker.parentNode.insertBefore(p,d.nextSibling)}else this.iterated[s].models[u]!==l&&this.iterated[s].update(r);if("OPTION"===t.nodeName){for(C=this.view.bindings,k=[],v=0,b=C.length;b>v;v++)i=C[v],k.push(i.el===this.marker.parentNode&&"value"===i.type?i.sync():void 0);return k}},update:function(e){var t,n,i,r,o,s,a,l;t={};for(n in e)i=e[n],n!==this.args[0]&&(t[n]=i);for(a=this.iterated,l=[],o=0,s=a.length;s>o;o++)r=a[o],l.push(r.update(t));return l}},e["public"].binders["class-*"]=function(e,t){var n;return n=" "+e.className+" ",!t==(-1!==n.indexOf(" "+this.args[0]+" "))?e.className=t?""+e.className+" "+this.args[0]:n.replace(" "+this.args[0]+" "," ").trim():void 0},e["public"].binders["*"]=function(e,t){return null!=t?e.setAttribute(this.type,t):e.removeAttribute(this.type)},e["public"].adapters["."]={id:"_rv",counter:0,weakmap:{},weakReference:function(e){var t,n,i;return e.hasOwnProperty(this.id)||(t=this.counter++,Object.defineProperty(e,this.id,{value:t})),(n=this.weakmap)[i=e[this.id]]||(n[i]={callbacks:{}})},cleanupWeakReference:function(e,t){return Object.keys(e.callbacks).length||e.pointers&&Object.keys(e.pointers).length?void 0:delete this.weakmap[t]},stubFunction:function(e,t){var n,i,r;return i=e[t],n=this.weakReference(e),r=this.weakmap,e[t]=function(){var t,o,s,a,l,u,c,d,p,h;a=i.apply(e,arguments),c=n.pointers;for(s in c)for(o=c[s],h=null!=(d=null!=(p=r[s])?p.callbacks[o]:void 0)?d:[],l=0,u=h.length;u>l;l++)(t=h[l])();return a}},observeMutations:function(e,t,n){var i,r,o,s,a,u;if(Array.isArray(e)){if(o=this.weakReference(e),null==o.pointers)for(o.pointers={},r=["push","pop","shift","unshift","sort","reverse","splice"],a=0,u=r.length;u>a;a++)i=r[a],this.stubFunction(e,i);if(null==(s=o.pointers)[t]&&(s[t]=[]),l.call(o.pointers[t],n)<0)return o.pointers[t].push(n)}},unobserveMutations:function(e,t,n){var i,r,o;return Array.isArray(e)&&null!=e[this.id]&&(r=this.weakmap[e[this.id]])&&(o=r.pointers[t])?((i=o.indexOf(n))>=0&&o.splice(i,1),o.length||delete r.pointers[t],this.cleanupWeakReference(r,e[this.id])):void 0},observe:function(e,t,n){var i,r,o;return i=this.weakReference(e).callbacks,null==i[t]&&(i[t]=[],r=Object.getOwnPropertyDescriptor(e,t),(null!=r?r.get:void 0)||(null!=r?r.set:void 0)||(o=e[t],Object.defineProperty(e,t,{enumerable:!0,get:function(){return o},set:function(r){return function(s){var a,u,c,d;if(s!==o&&(r.unobserveMutations(o,e[r.id],t),o=s,a=r.weakmap[e[r.id]])){if(i=a.callbacks,i[t])for(d=i[t].slice(),u=0,c=d.length;c>u;u++)n=d[u],l.call(i[t],n)>=0&&n();return r.observeMutations(s,e[r.id],t)}}}(this)}))),l.call(i[t],n)<0&&i[t].push(n),this.observeMutations(e[t],e[this.id],t)},unobserve:function(e,t,n){var i,r,o;return(o=this.weakmap[e[this.id]])&&(i=o.callbacks[t])?((r=i.indexOf(n))>=0&&(i.splice(r,1),i.length||delete o.callbacks[t]),this.unobserveMutations(e[t],e[this.id],t),this.cleanupWeakReference(o,e[this.id])):void 0},get:function(e,t){return e[t]},set:function(e,t,n){return e[t]=n}},e.factory=function(t){return e.sightglass=t,e["public"]._=e,e["public"]},"object"==typeof("undefined"!=typeof module&&null!==module?module.exports:void 0)?module.exports=e.factory(require("sightglass")):"function"==typeof define&&define.amd?define(["sightglass"],function(t){return this.rivets=e.factory(t)}):this.rivets=e.factory(sightglass)}.call(this),function(){var e,t,n,i,r,o,s=function(e,t){return function(){return e.apply(t,arguments)}};t=function(){function e(){this.update=s(this.update,this)}return e.prototype.update=function(e){var t,n,r;for(n in e)r=e[n],"items"!==n&&(this[n]=r);return this.items=function(){var n,r,o,s;for(o=e.items,s=[],n=0,r=o.length;r>n;n++)t=o[n],s.push(new i(t));return s}()},e}(),i=function(){function e(e){this.propertyArray=s(this.propertyArray,this),this.update=s(this.update,this),this.update(e)}return e.prototype.update=function(e){var t,i;for(t in e)i=e[t],"properties"!==t&&(this[t]=i);return this.properties=n.Utils.extend({},e.properties)},e.prototype.propertyArray=function(){var e,t,n,i;n=this.properties,i=[];for(e in n)t=n[e],i.push({name:e,value:t});return i},e}(),n={settings:{debug:!1,dataAPI:!0,requestBodyClass:null,rivetsModels:{},currency:null,moneyFormat:null,moneyWithCurrencyFormat:null,weightUnit:"g",weightPrecision:0},cart:new t},n.init=function(e,t){return null==t&&(t={}),n.configure(t),n.Utils.log("Initialising CartJS."),n.cart.update(e),n.settings.dataAPI&&(n.Utils.log('"dataAPI" setting is true, initialising Data API.'),n.Data.init()),n.settings.requestBodyClass&&(n.Utils.log('"requestBodyClass" set, adding event listeners.'),$(document).on("cart.requestStarted",function(){return $("body").addClass(n.settings.requestBodyClass)}),$(document).on("cart.requestComplete",function(){return $("body").removeClass(n.settings.requestBodyClass)})),n.Rivets.init(),jQuery(document).trigger("cart.ready",[n.cart])},n.configure=function(e){return null==e&&(e={}),n.Utils.extend(n.settings,e)},null==window.console&&(window.console={},window.console.log=function(){}),n.Utils={log:function(){return n.Utils.console(console.log,arguments)},error:function(){return n.Utils.console(console.error,arguments)},console:function(e,t){return n.settings.debug&&"undefined"!=typeof console&&null!==console?(t=Array.prototype.slice.call(t),t.unshift("[CartJS]:"),e.apply(console,t)):void 0},wrapKeys:function(e,t,n){var i,r,o;null==t&&(t="properties"),o={};for(i in e)r=e[i],o[""+t+"["+i+"]"]=null!=n?n:r;return o},unwrapKeys:function(e,t,n){var i,r,o,s;null==t&&(t="properties"),r={};for(i in e)s=e[i],o=i.replace(""+t+"[","").replace("]",""),r[o]=null!=n?n:s;return r},extend:function(e,t){var n,i;for(n in t)i=t[n],e[n]=i;return e},clone:function(e){var t,n;if(null==e||"object"!=typeof e)return e;n=new e.constructor;for(t in e)n[t]=clone(e[t]);return n},isArray:Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},ensureArray:function(e){return n.Utils.isArray(e)?e:null!=e?[e]:[]},formatMoney:function(e,t,i,r){var o,s;return null==r&&(r=""),r||(r=n.settings.currency),null!=window.Currency&&r!==n.settings.currency&&(e=Currency.convert(e,n.settings.currency,r),null!=(null!=(o=window.Currency)?o.moneyFormats:void 0)&&r in window.Currency.moneyFormats&&(t=window.Currency.moneyFormats[r][i])),null!=(null!=(s=window.Shopify)?s.formatMoney:void 0)?Shopify.formatMoney(e,t):e},getSizedImageUrl:function(e,t){var n,i;return null!=(null!=(n=window.Shopify)&&null!=(i=n.Image)?i.getSizedImageUrl:void 0)?e?Shopify.Image.getSizedImageUrl(e,t):Shopify.Image.getSizedImageUrl("https://cdn.shopify.com/s/images/admin/no-image-.gif",t).replace("-_","-"):e?e:"https://cdn.shopify.com/s/images/admin/no-image-large.gif"}},o=[],r=!1,n.Queue={add:function(e,t,i){var s;return null==i&&(i={}),s={url:e,data:t,type:i.type||"POST",dataType:i.dataType||"json",success:n.Utils.ensureArray(i.success),error:n.Utils.ensureArray(i.error),complete:n.Utils.ensureArray(i.complete)},i.updateCart&&s.success.push(n.cart.update),o.push(s),r?void 0:(jQuery(document).trigger("cart.requestStarted",[n.cart]),n.Queue.process())},process:function(){var e;return o.length?(r=!0,e=o.shift(),e.complete=n.Queue.process,jQuery.ajax(e)):(r=!1,void jQuery(document).trigger("cart.requestComplete",[n.cart]))}},n.Core={getCart:function(e){return null==e&&(e={}),e.type="GET",e.updateCart=!0,n.Queue.add("/cart.js",{},e)},addItem:function(e,t,i,r){var o;return null==t&&(t=1),null==i&&(i={}),null==r&&(r={}),o=n.Utils.wrapKeys(i),o.id=e,o.quantity=t,n.Queue.add("/cart/add.js",o,r),n.Core.getCart()},updateItem:function(e,t,i,r){var o;return null==i&&(i={}),null==r&&(r={}),o=n.Utils.wrapKeys(i),o.line=e,null!=t&&(o.quantity=t),r.updateCart=!0,n.Queue.add("/cart/change.js",o,r)},removeItem:function(e,t){return null==t&&(t={}),n.Core.updateItem(e,0,{},t)},updateItemById:function(e,t,i,r){var o;return null==i&&(i={}),null==r&&(r={}),o=n.Utils.wrapKeys(i),o.id=e,null!=t&&(o.quantity=t),r.updateCart=!0,n.Queue.add("/cart/change.js",o,r)},updateItemQuantitiesById:function(e,t){return null==e&&(e={}),null==t&&(t={}),t.updateCart=!0,n.Queue.add("/cart/update.js",{updates:e},t)},removeItemById:function(e,t){var i;return null==t&&(t={}),i={id:e,quantity:0},t.updateCart=!0,n.Queue.add("/cart/change.js",i,t)},clear:function(e){return null==e&&(e={}),e.updateCart=!0,n.Queue.add("/cart/clear.js",{},e)},getAttribute:function(e,t){return e in n.cart.attributes?n.cart.attributes[e]:t},setAttribute:function(e,t,i){var r;return null==i&&(i={}),r={},r[e]=t,n.Core.setAttributes(r,i)},getAttributes:function(){return n.cart.attributes},setAttributes:function(e,t){return null==e&&(e={}),null==t&&(t={}),t.updateCart=!0,n.Queue.add("/cart/update.js",n.Utils.wrapKeys(e,"attributes"),t)},clearAttributes:function(e){return null==e&&(e={}),e.updateCart=!0,n.Queue.add("/cart/update.js",n.Utils.wrapKeys(n.Core.getAttributes(),"attributes",""),e)},getNote:function(){return n.cart.note},setNote:function(e,t){return null==t&&(t={}),t.updateCart=!0,n.Queue.add("/cart/update.js",{note:e},t)}},e=jQuery(document),n.Data={init:function(){return n.Data.setEventListeners("on"),n.Data.render(null,n.cart)},destroy:function(){return n.Data.setEventListeners("off")},setEventListeners:function(t){return e[t]("click","[data-cart-add]",n.Data.add),e[t]("click","[data-cart-remove]",n.Data.remove),e[t]("click","[data-cart-remove-id]",n.Data.removeById),e[t]("click","[data-cart-update]",n.Data.update),e[t]("click","[data-cart-update-id]",n.Data.updateById),e[t]("click","[data-cart-clear]",n.Data.clear),e[t]("change","[data-cart-toggle]",n.Data.toggle),e[t]("change","[data-cart-toggle-attribute]",n.Data.toggleAttribute),e[t]("submit","[data-cart-submit]",n.Data.submit),e[t]("cart.requestComplete",n.Data.render)},add:function(e){var t;return e.preventDefault(),t=jQuery(this),n.Core.addItem(t.attr("data-cart-add"),t.attr("data-cart-quantity"))},remove:function(e){var t;return e.preventDefault(),t=jQuery(this),n.Core.removeItem(t.attr("data-cart-remove"))},removeById:function(e){var t;return e.preventDefault(),t=jQuery(this),n.Core.removeItemById(t.attr("data-cart-remove-id"))},update:function(e){var t;return e.preventDefault(),t=jQuery(this),n.Core.updateItem(t.attr("data-cart-update"),t.attr("data-cart-quantity"))},updateById:function(e){var t;return e.preventDefault(),t=jQuery(this),n.Core.updateItemById(t.attr("data-cart-update-id"),t.attr("data-cart-quantity"))},clear:function(e){return e.preventDefault(),n.Core.clear()},toggle:function(){var e,t;return e=jQuery(this),t=e.attr("data-cart-toggle"),e.is(":checked")?n.Core.addItem(t):n.Core.removeItemById(t)},toggleAttribute:function(){var e,t;return e=jQuery(this),t=e.attr("data-cart-toggle-attribute"),n.Core.setAttribute(t,e.is(":checked")?"Yes":"")},submit:function(e){var t,i,r,o;return e.preventDefault(),t=jQuery(this).serializeArray(),i=void 0,o=void 0,r={},jQuery.each(t,function(e,t){return"id"===t.name?i=t.value:"quantity"===t.name?o=t.value:r[t.name]=t.value}),n.Core.addItem(i,o,n.Utils.unwrapKeys(r))},render:function(e,t){var i;return i={item_count:t.item_count,total_price:t.total_price,total_price_money:n.Utils.formatMoney(t.total_price,n.settings.moneyFormat,"money_format",null!=("undefined"!=typeof Currency&&null!==Currency?Currency.currentCurrency:void 0)?Currency.currentCurrency:void 0),total_price_money_with_currency:n.Utils.formatMoney(t.total_price,n.settings.moneyWithCurrencyFormat,"money_with_currency_format",null!=("undefined"!=typeof Currency&&null!==Currency?Currency.currentCurrency:void 0)?Currency.currentCurrency:void 0)},jQuery("[data-cart-render]").each(function(){var e;return e=jQuery(this),e.html(i[e.attr("data-cart-render")])})}},"rivets"in window?(n.Rivets={model:null,boundViews:[],init:function(){return n.Rivets.bindViews(),null!=n.IE8?n.IE8.init():void 0},destroy:function(){return n.Rivets.unbindViews(),null!=n.IE8?n.IE8.destroy():void 0},bindViews:function(){return n.Utils.log("Rivets.js is present, binding views."),n.Rivets.unbindViews(),n.Rivets.model=n.Utils.extend({cart:n.cart},n.settings.rivetsModels),null!=window.Currency&&(n.Rivets.model.Currency=window.Currency),jQuery("[data-cart-view]").each(function(){var e;return e=rivets.bind(jQuery(this),n.Rivets.model),n.Rivets.boundViews.push(e)})},unbindViews:function(){var e,t,i,r;for(r=n.Rivets.boundViews,t=0,i=r.length;i>t;t++)e=r[t],e.unbind();return n.Rivets.boundViews=[]}},rivets.formatters.eq=function(e,t){return e===t},rivets.formatters.lt=function(e,t){return t>e},rivets.formatters.gt=function(e,t){return e>t},rivets.formatters.not=function(e){return!e},rivets.formatters.empty=function(e){return!e.length},rivets.formatters.plus=function(e,t){return parseInt(e)+parseInt(t)},rivets.formatters.minus=function(e,t){return parseInt(e)-parseInt(t)},rivets.formatters.prepend=function(e,t){return t+e},rivets.formatters.append=function(e,t){return e+t},rivets.formatters.money=function(e,t){return n.Utils.formatMoney(e,n.settings.moneyFormat,"money_format",t)},rivets.formatters.money_with_currency=function(e,t){return n.Utils.formatMoney(e,n.settings.moneyWithCurrencyFormat,"money_with_currency_format",t)},rivets.formatters.weight=function(e){switch(n.settings.weightUnit){case"kg":return(e/1e3).toFixed(n.settings.weightPrecision);case"oz":return(.035274*e).toFixed(n.settings.weightPrecision);case"lb":return(.00220462*e).toFixed(n.settings.weightPrecision);default:return e.toFixed(n.settings.weightPrecision)}},rivets.formatters.weight_with_unit=function(e){return rivets.formatters.weight(e)+n.settings.weightUnit},rivets.formatters.product_image_size=function(e,t){return n.Utils.getSizedImageUrl(e,t)},rivets.formatters.moneyWithCurrency=rivets.formatters.money_with_currency,rivets.formatters.weightWithUnit=rivets.formatters.weight_with_unit,rivets.formatters.productImageSize=rivets.formatters.product_image_size):n.Rivets={init:function(){},destroy:function(){}},n.factory=function(e){return e.init=n.init,e.configure=n.configure,e.cart=n.cart,e.settings=n.settings,e.getCart=n.Core.getCart,e.addItem=n.Core.addItem,e.updateItem=n.Core.updateItem,e.updateItemById=n.Core.updateItemById,e.updateItemQuantitiesById=n.Core.updateItemQuantitiesById,e.removeItem=n.Core.removeItem,e.removeItemById=n.Core.removeItemById,e.clear=n.Core.clear,e.getAttribute=n.Core.getAttribute,e.setAttribute=n.Core.setAttribute,e.getAttributes=n.Core.getAttributes,e.setAttributes=n.Core.setAttributes,e.clearAttributes=n.Core.clearAttributes,e.getNote=n.Core.getNote,e.setNote=n.Core.setNote,e.render=n.Data.render},"object"==typeof exports?n.factory(exports):"function"==typeof define&&define.amd?define(["exports"],function(e){return n.factory(this.CartJS=e),e}):n.factory(this.CartJS={})}.call(this),/*!
 * EventEmitter v4.2.6 - git.io/ee
 * Oliver Caldwell
 * MIT license
 * @preserve
 */
function(){"use strict";function e(){}function t(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}function n(e){return function t(){return this[e].apply(this,arguments)}}var i=e.prototype,r=this,o=r.EventEmitter;i.getListeners=function s(e){var t=this._getEvents(),n,i;if("object"==typeof e){n={};for(i in t)t.hasOwnProperty(i)&&e.test(i)&&(n[i]=t[i])}else n=t[e]||(t[e]=[]);return n},i.flattenListeners=function a(e){var t=[],n;for(n=0;n<e.length;n+=1)t.push(e[n].listener);return t},i.getListenersAsObject=function l(e){var t=this.getListeners(e),n;return t instanceof Array&&(n={},n[e]=t),n||t},i.addListener=function u(e,n){var i=this.getListenersAsObject(e),r="object"==typeof n,o;for(o in i)i.hasOwnProperty(o)&&-1===t(i[o],n)&&i[o].push(r?n:{listener:n,once:!1});return this},i.on=n("addListener"),i.addOnceListener=function c(e,t){return this.addListener(e,{listener:t,once:!0})},i.once=n("addOnceListener"),i.defineEvent=function d(e){return this.getListeners(e),this},i.defineEvents=function p(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},i.removeListener=function h(e,n){var i=this.getListenersAsObject(e),r,o;for(o in i)i.hasOwnProperty(o)&&(r=t(i[o],n),-1!==r&&i[o].splice(r,1));return this},i.off=n("removeListener"),i.addListeners=function f(e,t){return this.manipulateListeners(!1,e,t)},i.removeListeners=function m(e,t){return this.manipulateListeners(!0,e,t)},i.manipulateListeners=function v(e,t,n){var i,r,o=e?this.removeListener:this.addListener,s=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(i=n.length;i--;)o.call(this,t,n[i]);else for(i in t)t.hasOwnProperty(i)&&(r=t[i])&&("function"==typeof r?o.call(this,i,r):s.call(this,i,r));return this},i.removeEvent=function g(e){var t=typeof e,n=this._getEvents(),i;if("string"===t)delete n[e];else if("object"===t)for(i in n)n.hasOwnProperty(i)&&e.test(i)&&delete n[i];else delete this._events;return this},i.removeAllListeners=n("removeEvent"),i.emitEvent=function y(e,t){var n=this.getListenersAsObject(e),i,r,o,s;for(o in n)if(n.hasOwnProperty(o))for(r=n[o].length;r--;)i=n[o][r],i.once===!0&&this.removeListener(e,i.listener),s=i.listener.apply(this,t||[]),s===this._getOnceReturnValue()&&this.removeListener(e,i.listener);return this},i.trigger=n("emitEvent"),i.emit=function b(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},i.setOnceReturnValue=function w(e){return this._onceReturnValue=e,this},i._getOnceReturnValue=function x(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},i._getEvents=function C(){return this._events||(this._events={})},e.noConflict=function k(){return r.EventEmitter=o,e},"function"==typeof define&&define.amd?define("eventEmitter/EventEmitter",[],function(){return e}):"object"==typeof module&&module.exports?module.exports=e:this.EventEmitter=e}.call(this),function(e){function t(t){var n=e.event;return n.target=n.target||n.srcElement||t,n}var n=document.documentElement,i=function(){};n.addEventListener?i=function(e,t,n){e.addEventListener(t,n,!1)}:n.attachEvent&&(i=function(e,n,i){e[n+i]=i.handleEvent?function(){var n=t(e);i.handleEvent.call(i,n)}:function(){var n=t(e);i.call(e,n)},e.attachEvent("on"+n,e[n+i])});var r=function(){};n.removeEventListener?r=function(e,t,n){e.removeEventListener(t,n,!1)}:n.detachEvent&&(r=function(e,t,n){e.detachEvent("on"+t,e[t+n]);try{delete e[t+n]}catch(i){e[t+n]=void 0}});var o={bind:i,unbind:r};"function"==typeof define&&define.amd?define("eventie/eventie",o):e.eventie=o}(this),function(e,t){"use strict";"function"==typeof define&&define.amd?define(["eventEmitter/EventEmitter","eventie/eventie"],function(n,i){return t(e,n,i)}):"object"==typeof module&&module.exports?module.exports=t(e,require("wolfy87-eventemitter"),require("eventie")):e.imagesLoaded=t(e,e.EventEmitter,e.eventie)}(window,function e(t,n,i){function r(e,t){for(var n in t)e[n]=t[n];return e}function o(e){return"[object Array]"==d.call(e)}function s(e){var t=[];if(o(e))t=e;else if("number"==typeof e.length)for(var n=0;n<e.length;n++)t.push(e[n]);else t.push(e);return t}function a(e,t,n){if(!(this instanceof a))return new a(e,t,n);"string"==typeof e&&(e=document.querySelectorAll(e)),this.elements=s(e),this.options=r({},this.options),"function"==typeof t?n=t:r(this.options,t),n&&this.on("always",n),this.getImages(),$&&(this.jqDeferred=new $.Deferred);var i=this;setTimeout(function(){i.check()})}function l(e){this.img=e}function u(e,t){this.url=e,this.element=t,this.img=new Image}var $=t.jQuery,c=t.console,d=Object.prototype.toString;a.prototype=new n,a.prototype.options={},a.prototype.getImages=function(){this.images=[];for(var e=0;e<this.elements.length;e++){var t=this.elements[e];this.addElementImages(t)}},a.prototype.addElementImages=function(e){"IMG"==e.nodeName&&this.addImage(e),this.options.background===!0&&this.addElementBackgroundImages(e);var t=e.nodeType;if(t&&p[t]){for(var n=e.querySelectorAll("img"),i=0;i<n.length;i++){var r=n[i];this.addImage(r)}if("string"==typeof this.options.background){var o=e.querySelectorAll(this.options.background);for(i=0;i<o.length;i++){var s=o[i];this.addElementBackgroundImages(s)}}}};var p={1:!0,9:!0,11:!0};a.prototype.addElementBackgroundImages=function(e){for(var t=h(e),n=/url\(['"]*([^'"\)]+)['"]*\)/gi,i=n.exec(t.backgroundImage);null!==i;){var r=i&&i[1];r&&this.addBackground(r,e),i=n.exec(t.backgroundImage)}};var h=t.getComputedStyle||function(e){return e.currentStyle};return a.prototype.addImage=function(e){var t=new l(e);this.images.push(t)},a.prototype.addBackground=function(e,t){var n=new u(e,t);this.images.push(n)},a.prototype.check=function(){function e(e,n,i){setTimeout(function(){t.progress(e,n,i)})}var t=this;if(this.progressedCount=0,this.hasAnyBroken=!1,!this.images.length)return void this.complete();for(var n=0;n<this.images.length;n++){var i=this.images[n];i.once("progress",e),i.check()}},a.prototype.progress=function(e,t,n){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!e.isLoaded,this.emit("progress",this,e,t),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,e),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&c&&c.log("progress: "+n,e,t)},a.prototype.complete=function(){var e=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emit(e,this),this.emit("always",this),this.jqDeferred){var t=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[t](this)}},l.prototype=new n,l.prototype.check=function(){var e=this.getIsImageComplete();return e?void this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,i.bind(this.proxyImage,"load",this),i.bind(this.proxyImage,"error",this),i.bind(this.img,"load",this),i.bind(this.img,"error",this),void(this.proxyImage.src=this.img.src))},l.prototype.getIsImageComplete=function(){return this.img.complete&&void 0!==this.img.naturalWidth},l.prototype.confirm=function(e,t){this.isLoaded=e,this.emit("progress",this,this.img,t)},l.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},l.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},l.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},l.prototype.unbindEvents=function(){i.unbind(this.proxyImage,"load",this),i.unbind(this.proxyImage,"error",this),i.unbind(this.img,"load",this),i.unbind(this.img,"error",this)},u.prototype=new l,u.prototype.check=function(){i.bind(this.img,"load",this),i.bind(this.img,"error",this),this.img.src=this.url;var e=this.getIsImageComplete();e&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},u.prototype.unbindEvents=function(){i.unbind(this.img,"load",this),i.unbind(this.img,"error",this)},u.prototype.confirm=function(e,t){this.isLoaded=e,this.emit("progress",this,this.element,t)},a.makeJQueryPlugin=function(e){e=e||t.jQuery,e&&($=e,$.fn.imagesLoaded=function(e,t){var n=new a(this,e,t);return n.jqDeferred.promise($(this))})},a.makeJQueryPlugin(),a}),!function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.PhotoSwipe=t()}(this,function(){"use strict";var e=function(e,t,n,i){var r={features:null,bind:function(e,t,n,i){var r=(i?"remove":"add")+"EventListener";t=t.split(" ");for(var o=0;o<t.length;o++)t[o]&&e[r](t[o],n,!1)},isArray:function(e){return e instanceof Array},createEl:function(e,t){var n=document.createElement(t||"div");return e&&(n.className=e),n},getScrollY:function(){var e=window.pageYOffset;return void 0!==e?e:document.documentElement.scrollTop},unbind:function(e,t,n){r.bind(e,t,n,!0)},removeClass:function(e,t){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(n," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")},addClass:function(e,t){r.hasClass(e,t)||(e.className+=(e.className?" ":"")+t)},hasClass:function(e,t){return e.className&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(e.className)},getChildByClass:function(e,t){for(var n=e.firstChild;n;){if(r.hasClass(n,t))return n;n=n.nextSibling}},arraySearch:function(e,t,n){for(var i=e.length;i--;)if(e[i][n]===t)return i;return-1},extend:function(e,t,n){for(var i in t)if(t.hasOwnProperty(i)){if(n&&e.hasOwnProperty(i))continue;e[i]=t[i]}},easing:{sine:{out:function(e){return Math.sin(e*(Math.PI/2))},inOut:function(e){return-(Math.cos(Math.PI*e)-1)/2}},cubic:{out:function(e){return--e*e*e+1}}},detectFeatures:function(){if(r.features)return r.features;var e=r.createEl(),t=e.style,n="",i={};if(i.oldIE=document.all&&!document.addEventListener,i.touch="ontouchstart"in window,window.requestAnimationFrame&&(i.raf=window.requestAnimationFrame,i.caf=window.cancelAnimationFrame),i.pointerEvent=navigator.pointerEnabled||navigator.msPointerEnabled,!i.pointerEvent){var o=navigator.userAgent;if(/iP(hone|od)/.test(navigator.platform)){var s=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);s&&s.length>0&&(s=parseInt(s[1],10),s>=1&&8>s&&(i.isOldIOSPhone=!0))}var a=o.match(/Android\s([0-9\.]*)/),l=a?a[1]:0;l=parseFloat(l),l>=1&&(4.4>l&&(i.isOldAndroid=!0),i.androidVersion=l),i.isMobileOpera=/opera mini|opera mobi/i.test(o)}for(var u,c,d=["transform","perspective","animationName"],p=["","webkit","Moz","ms","O"],h=0;4>h;h++){n=p[h];for(var f=0;3>f;f++)u=d[f],c=n+(n?u.charAt(0).toUpperCase()+u.slice(1):u),!i[u]&&c in t&&(i[u]=c);n&&!i.raf&&(n=n.toLowerCase(),i.raf=window[n+"RequestAnimationFrame"],i.raf&&(i.caf=window[n+"CancelAnimationFrame"]||window[n+"CancelRequestAnimationFrame"]))}if(!i.raf){var m=0;i.raf=function(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-m)),i=window.setTimeout(function(){e(t+n)},n);return m=t+n,i},i.caf=function(e){clearTimeout(e)}}return i.svg=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,r.features=i,i}};r.detectFeatures(),r.features.oldIE&&(r.bind=function(e,t,n,i){t=t.split(" ");for(var r,o=(i?"detach":"attach")+"Event",s=function(){n.handleEvent.call(n)},a=0;a<t.length;a++)if(r=t[a])if("object"==typeof n&&n.handleEvent){if(i){if(!n["oldIE"+r])return!1}else n["oldIE"+r]=s;e[o]("on"+r,n["oldIE"+r])}else e[o]("on"+r,n)});var o=this,s=25,a=3,l={allowPanToNext:!0,spacing:.12,bgOpacity:1,mouseUsed:!1,loop:!0,pinchToClose:!0,closeOnScroll:!0,closeOnVerticalDrag:!0,verticalDragRange:.75,hideAnimationDuration:333,showAnimationDuration:333,showHideOpacity:!1,focus:!0,escKey:!0,arrowKeys:!0,mainScrollEndFriction:.35,panEndFriction:.35,isClickableElement:function(e){return"A"===e.tagName},getDoubleTapZoom:function(e,t){return e?1:t.initialZoomLevel<.7?1:1.33},maxSpreadZoom:1.33,modal:!0,scaleMode:"fit",alwaysFadeIn:!1};r.extend(l,i);var u,c,d,p,h,f,m,v,g,y,b,w,x,C,k,I,E,_,T,O,P,S,D,M,A,j,F,L,R,z,q,U,N,Y,B,W,X,H,Q,V,Z,K,G,$,J,ee,te,ne,ie,re,oe,se,ae,le,ue,ce,de=function(){return{x:0,y:0}},pe=de(),he=de(),fe=de(),me={},ve=0,ge={},ye=de(),be=0,we=!0,xe=[],Ce={},ke=!1,Ie=function(e,t){r.extend(o,t.publicMethods),xe.push(e)},Ee=function(e){var t=Jt();return e>t-1?e-t:0>e?t+e:e},$e={},_e=function(e,t){return $e[e]||($e[e]=[]),$e[e].push(t)},Te=function(e){var t=$e[e];if(t){var n=Array.prototype.slice.call(arguments);n.shift();for(var i=0;i<t.length;i++)t[i].apply(o,n)}},Oe=function(){return(new Date).getTime()},Pe=function(e){le=e,o.bg.style.opacity=e*l.bgOpacity},Se=function(e,t,n,i,r){(!ke||r&&r!==o.currItem)&&(i/=r?r.fitRatio:o.currItem.fitRatio),e[S]=w+t+"px, "+n+"px"+x+" scale("+i+")"},De=function(e){ie&&(e&&(y>o.currItem.fitRatio?ke||(pn(o.currItem,!1,!0),ke=!0):ke&&(pn(o.currItem),ke=!1)),Se(ie,fe.x,fe.y,y))},Me=function(e){e.container&&Se(e.container.style,e.initialPosition.x,e.initialPosition.y,e.initialZoomLevel,e)},Ae=function(e,t){t[S]=w+e+"px, 0px"+x},je=function(e,t){if(!l.loop&&t){var n=p+(ye.x*ve-e)/ye.x,i=Math.round(e-yt.x);(0>n&&i>0||n>=Jt()-1&&0>i)&&(e=yt.x+i*l.mainScrollEndFriction)}yt.x=e,Ae(e,h)},Fe=function(e,t){var n=bt[e]-ge[e];return he[e]+pe[e]+n-n*(t/b)},Le=function(e,t){e.x=t.x,e.y=t.y,t.id&&(e.id=t.id)},Re=function(e){e.x=Math.round(e.x),e.y=Math.round(e.y)},ze=null,qe=function(){ze&&(r.unbind(document,"mousemove",qe),r.addClass(e,"pswp--has_mouse"),l.mouseUsed=!0,Te("mouseUsed")),ze=setTimeout(function(){ze=null},100)},Ue=function(){r.bind(document,"keydown",o),q.transform&&r.bind(o.scrollWrap,"click",o),l.mouseUsed||r.bind(document,"mousemove",qe),r.bind(window,"resize scroll",o),Te("bindEvents")},Ne=function(){r.unbind(window,"resize",o),r.unbind(window,"scroll",g.scroll),r.unbind(document,"keydown",o),r.unbind(document,"mousemove",qe),q.transform&&r.unbind(o.scrollWrap,"click",o),H&&r.unbind(window,m,o),Te("unbindEvents")},Ye=function(e,t){var n=ln(o.currItem,me,e);return t&&(ne=n),n},Be=function(e){return e||(e=o.currItem),e.initialZoomLevel},We=function(e){return e||(e=o.currItem),e.w>0?l.maxSpreadZoom:1},Xe=function(e,t,n,i){return i===o.currItem.initialZoomLevel?(n[e]=o.currItem.initialPosition[e],!0):(n[e]=Fe(e,i),n[e]>t.min[e]?(n[e]=t.min[e],!0):n[e]<t.max[e]?(n[e]=t.max[e],!0):!1)},He=function(){if(S){var t=q.perspective&&!M;return w="translate"+(t?"3d(":"("),void(x=q.perspective?", 0px)":")")}S="left",r.addClass(e,"pswp--ie"),Ae=function(e,t){t.left=e+"px"},Me=function(e){var t=e.fitRatio>1?1:e.fitRatio,n=e.container.style,i=t*e.w,r=t*e.h;n.width=i+"px",n.height=r+"px",n.left=e.initialPosition.x+"px",n.top=e.initialPosition.y+"px"},De=function(){if(ie){var e=ie,t=o.currItem,n=t.fitRatio>1?1:t.fitRatio,i=n*t.w,r=n*t.h;e.width=i+"px",e.height=r+"px",e.left=fe.x+"px",e.top=fe.y+"px"}}},Qe=function(e){var t="";l.escKey&&27===e.keyCode?t="close":l.arrowKeys&&(37===e.keyCode?t="prev":39===e.keyCode&&(t="next")),t&&(e.ctrlKey||e.altKey||e.shiftKey||e.metaKey||(e.preventDefault?e.preventDefault():e.returnValue=!1,o[t]()))},Ve=function(e){e&&(Z||V||re||W)&&(e.preventDefault(),e.stopPropagation())},Ze=function(){o.setScrollOffset(0,r.getScrollY())},Ke={},Ge=0,Je=function(e){Ke[e]&&(Ke[e].raf&&j(Ke[e].raf),Ge--,delete Ke[e])},et=function(e){Ke[e]&&Je(e),Ke[e]||(Ge++,Ke[e]={})},tt=function(){for(var e in Ke)Ke.hasOwnProperty(e)&&Je(e)},nt=function(e,t,n,i,r,o,s){var a,l=Oe();et(e);var u=function(){if(Ke[e]){if(a=Oe()-l,a>=i)return Je(e),o(n),void(s&&s());o((n-t)*r(a/i)+t),Ke[e].raf=A(u)}};u()},it={shout:Te,listen:_e,viewportSize:me,options:l,isMainScrollAnimating:function(){return re},getZoomLevel:function(){return y},getCurrentIndex:function(){return p},isDragging:function(){return H},isZooming:function(){return J},setScrollOffset:function(e,t){ge.x=e,z=ge.y=t,Te("updateScrollOffset",ge)},applyZoomPan:function(e,t,n,i){fe.x=t,fe.y=n,y=e,De(i)},init:function(){if(!u&&!c){var n;o.framework=r,o.template=e,o.bg=r.getChildByClass(e,"pswp__bg"),F=e.className,u=!0,q=r.detectFeatures(),A=q.raf,j=q.caf,S=q.transform,R=q.oldIE,o.scrollWrap=r.getChildByClass(e,"pswp__scroll-wrap"),o.container=r.getChildByClass(o.scrollWrap,"pswp__container"),h=o.container.style,o.itemHolders=I=[{el:o.container.children[0],wrap:0,index:-1},{el:o.container.children[1],wrap:0,index:-1},{el:o.container.children[2],wrap:0,index:-1}],I[0].el.style.display=I[2].el.style.display="none",He(),g={resize:o.updateSize,scroll:Ze,keydown:Qe,click:Ve};var i=q.isOldIOSPhone||q.isOldAndroid||q.isMobileOpera;for(q.animationName&&q.transform&&!i||(l.showAnimationDuration=l.hideAnimationDuration=0),n=0;n<xe.length;n++)o["init"+xe[n]]();if(t){var s=o.ui=new t(o,r);s.init()}Te("firstUpdate"),p=p||l.index||0,(isNaN(p)||0>p||p>=Jt())&&(p=0),o.currItem=Gt(p),(q.isOldIOSPhone||q.isOldAndroid)&&(we=!1),e.setAttribute("aria-hidden","false"),l.modal&&(we?e.style.position="fixed":(e.style.position="absolute",e.style.top=r.getScrollY()+"px")),void 0===z&&(Te("initialLayout"),z=L=r.getScrollY());var d="pswp--open ";for(l.mainClass&&(d+=l.mainClass+" "),l.showHideOpacity&&(d+="pswp--animate_opacity "),d+=M?"pswp--touch":"pswp--notouch",d+=q.animationName?" pswp--css_animation":"",d+=q.svg?" pswp--svg":"",r.addClass(e,d),o.updateSize(),f=-1,be=null,n=0;a>n;n++)Ae((n+f)*ye.x,I[n].el.style);R||r.bind(o.scrollWrap,v,o),_e("initialZoomInEnd",function(){o.setContent(I[0],p-1),o.setContent(I[2],p+1),I[0].el.style.display=I[2].el.style.display="block",l.focus&&e.focus(),Ue()}),o.setContent(I[1],p),o.updateCurrItem(),Te("afterInit"),we||(C=setInterval(function(){Ge||H||J||y!==o.currItem.initialZoomLevel||o.updateSize()},1e3)),r.addClass(e,"pswp--visible")}},close:function(){u&&(u=!1,c=!0,Te("close"),Ne(),tn(o.currItem,null,!0,o.destroy))},destroy:function(){Te("destroy"),Qt&&clearTimeout(Qt),e.setAttribute("aria-hidden","true"),e.className=F,C&&clearInterval(C),r.unbind(o.scrollWrap,v,o),r.unbind(window,"scroll",o),It(),tt(),$e=null},panTo:function(e,t,n){n||(e>ne.min.x?e=ne.min.x:e<ne.max.x&&(e=ne.max.x),t>ne.min.y?t=ne.min.y:t<ne.max.y&&(t=ne.max.y)),fe.x=e,fe.y=t,De()},handleEvent:function(e){e=e||window.event,g[e.type]&&g[e.type](e)},goTo:function(e){e=Ee(e);var t=e-p;be=t,p=e,o.currItem=Gt(p),ve-=t,je(ye.x*ve),tt(),re=!1,o.updateCurrItem()},next:function(){o.goTo(p+1)},prev:function(){o.goTo(p-1)},updateCurrZoomItem:function(e){if(e&&Te("beforeChange",0),I[1].el.children.length){var t=I[1].el.children[0];ie=r.hasClass(t,"pswp__zoom-wrap")?t.style:null}else ie=null;ne=o.currItem.bounds,b=y=o.currItem.initialZoomLevel,fe.x=ne.center.x,fe.y=ne.center.y,e&&Te("afterChange")},invalidateCurrItems:function(){k=!0;for(var e=0;a>e;e++)I[e].item&&(I[e].item.needsUpdate=!0)},updateCurrItem:function(e){if(0!==be){var t,n=Math.abs(be);if(!(e&&2>n)){o.currItem=Gt(p),ke=!1,Te("beforeChange",be),n>=a&&(f+=be+(be>0?-a:a),n=a);for(var i=0;n>i;i++)be>0?(t=I.shift(),I[a-1]=t,f++,Ae((f+2)*ye.x,t.el.style),o.setContent(t,p-n+i+1+1)):(t=I.pop(),I.unshift(t),f--,Ae(f*ye.x,t.el.style),o.setContent(t,p+n-i-1-1));if(ie&&1===Math.abs(be)){var r=Gt(E);r.initialZoomLevel!==y&&(ln(r,me),pn(r),Me(r))}be=0,o.updateCurrZoomItem(),E=p,Te("afterChange")}}},updateSize:function(t){if(!we&&l.modal){var n=r.getScrollY();if(z!==n&&(e.style.top=n+"px",z=n),!t&&Ce.x===window.innerWidth&&Ce.y===window.innerHeight)return;Ce.x=window.innerWidth,Ce.y=window.innerHeight,e.style.height=Ce.y+"px"}if(me.x=o.scrollWrap.clientWidth,me.y=o.scrollWrap.clientHeight,Ze(),ye.x=me.x+Math.round(me.x*l.spacing),ye.y=me.y,je(ye.x*ve),Te("beforeResize"),void 0!==f){for(var i,s,u,c=0;a>c;c++)i=I[c],Ae((c+f)*ye.x,i.el.style),u=p+c-1,l.loop&&Jt()>2&&(u=Ee(u)),s=Gt(u),s&&(k||s.needsUpdate||!s.bounds)?(o.cleanSlide(s),o.setContent(i,u),1===c&&(o.currItem=s,o.updateCurrZoomItem(!0)),s.needsUpdate=!1):-1===i.index&&u>=0&&o.setContent(i,u),s&&s.container&&(ln(s,me),pn(s),Me(s));k=!1}b=y=o.currItem.initialZoomLevel,ne=o.currItem.bounds,ne&&(fe.x=ne.center.x,fe.y=ne.center.y,De(!0)),Te("resize")},zoomTo:function(e,t,n,i,o){t&&(b=y,bt.x=Math.abs(t.x)-fe.x,bt.y=Math.abs(t.y)-fe.y,Le(he,fe));var s=Ye(e,!1),a={};Xe("x",s,a,e),Xe("y",s,a,e);var l=y,u={x:fe.x,y:fe.y};Re(a);var c=function(t){1===t?(y=e,fe.x=a.x,fe.y=a.y):(y=(e-l)*t+l,fe.x=(a.x-u.x)*t+u.x,fe.y=(a.y-u.y)*t+u.y),o&&o(t),De(1===t)};n?nt("customZoomTo",0,1,n,i||r.easing.sine.inOut,c):c(1)}},rt=30,ot=10,st={},at={},lt={},ut={},ct={},dt=[],pt={},ht=[],ft={},mt=0,vt=de(),gt=0,yt=de(),bt=de(),wt=de(),xt=function(e,t){return e.x===t.x&&e.y===t.y},Ct=function(e,t){return Math.abs(e.x-t.x)<s&&Math.abs(e.y-t.y)<s},kt=function(e,t){return ft.x=Math.abs(e.x-t.x),ft.y=Math.abs(e.y-t.y),Math.sqrt(ft.x*ft.x+ft.y*ft.y)},It=function(){K&&(j(K),K=null)},Et=function(){H&&(K=A(Et),Ut())},$t=function(){return!("fit"===l.scaleMode&&y===o.currItem.initialZoomLevel)},_t=function(e,t){return e?e.className&&e.className.indexOf("pswp__scroll-wrap")>-1?!1:t(e)?e:_t(e.parentNode,t):!1},Tt={},Ot=function(e,t){return Tt.prevent=!_t(e.target,l.isClickableElement),Te("preventDragEvent",e,t,Tt),Tt.prevent},Pt=function(e,t){return t.x=e.pageX,t.y=e.pageY,t.id=e.identifier,t},St=function(e,t,n){n.x=.5*(e.x+t.x),n.y=.5*(e.y+t.y)},Dt=function(e,t,n){if(e-N>50){var i=ht.length>2?ht.shift():{};i.x=t,i.y=n,ht.push(i),N=e}},Mt=function(){var e=fe.y-o.currItem.initialPosition.y;return 1-Math.abs(e/(me.y/2))},At={},jt={},Ft=[],Lt=function(e){for(;Ft.length>0;)Ft.pop();return D?(ce=0,dt.forEach(function(e){0===ce?Ft[0]=e:1===ce&&(Ft[1]=e),ce++})):e.type.indexOf("touch")>-1?e.touches&&e.touches.length>0&&(Ft[0]=Pt(e.touches[0],At),e.touches.length>1&&(Ft[1]=Pt(e.touches[1],jt))):(At.x=e.pageX,At.y=e.pageY,At.id="",Ft[0]=At),Ft},Rt=function(e,t){var n,i,r,s,a=0,u=fe[e]+t[e],c=t[e]>0,d=yt.x+t.x,p=yt.x-pt.x;return n=u>ne.min[e]||u<ne.max[e]?l.panEndFriction:1,u=fe[e]+t[e]*n,!l.allowPanToNext&&y!==o.currItem.initialZoomLevel||(ie?"h"!==oe||"x"!==e||V||(c?(u>ne.min[e]&&(n=l.panEndFriction,a=ne.min[e]-u,i=ne.min[e]-he[e]),(0>=i||0>p)&&Jt()>1?(s=d,0>p&&d>pt.x&&(s=pt.x)):ne.min.x!==ne.max.x&&(r=u)):(u<ne.max[e]&&(n=l.panEndFriction,a=u-ne.max[e],i=he[e]-ne.max[e]),(0>=i||p>0)&&Jt()>1?(s=d,p>0&&d<pt.x&&(s=pt.x)):ne.min.x!==ne.max.x&&(r=u))):s=d,"x"!==e)?void(re||G||y>o.currItem.fitRatio&&(fe[e]+=t[e]*n)):(void 0!==s&&(je(s,!0),G=s===pt.x?!1:!0),ne.min.x!==ne.max.x&&(void 0!==r?fe.x=r:G||(fe.x+=t.x*n)),void 0!==s)},zt=function(e){if(!("mousedown"===e.type&&e.button>0)){if(Kt)return void e.preventDefault();if(!X||"mousedown"!==e.type){if(Ot(e,!0)&&e.preventDefault(),Te("pointerDown"),D){var t=r.arraySearch(dt,e.pointerId,"id");0>t&&(t=dt.length),dt[t]={x:e.pageX,y:e.pageY,id:e.pointerId}}var n=Lt(e),i=n.length;$=null,tt(),H&&1!==i||(H=se=!0,r.bind(window,m,o),B=ue=ae=W=G=Z=Q=V=!1,oe=null,Te("firstTouchStart",n),Le(he,fe),pe.x=pe.y=0,Le(ut,n[0]),Le(ct,ut),pt.x=ye.x*ve,ht=[{x:ut.x,y:ut.y}],N=U=Oe(),Ye(y,!0),It(),Et()),!J&&i>1&&!re&&!G&&(b=y,V=!1,J=Q=!0,pe.y=pe.x=0,Le(he,fe),Le(st,n[0]),Le(at,n[1]),St(st,at,wt),bt.x=Math.abs(wt.x)-fe.x,bt.y=Math.abs(wt.y)-fe.y,ee=te=kt(st,at))}}},qt=function(e){if(e.preventDefault(),D){var t=r.arraySearch(dt,e.pointerId,"id");if(t>-1){var n=dt[t];n.x=e.pageX,n.y=e.pageY}}if(H){var i=Lt(e);if(oe||Z||J)$=i;else if(yt.x!==ye.x*ve)oe="h";else{var o=Math.abs(i[0].x-ut.x)-Math.abs(i[0].y-ut.y);Math.abs(o)>=ot&&(oe=o>0?"h":"v",$=i)}}},Ut=function(){if($){var e=$.length;if(0!==e)if(Le(st,$[0]),lt.x=st.x-ut.x,lt.y=st.y-ut.y,J&&e>1){if(ut.x=st.x,ut.y=st.y,!lt.x&&!lt.y&&xt($[1],at))return;Le(at,$[1]),V||(V=!0,Te("zoomGestureStarted"));var t=kt(st,at),n=Xt(t);n>o.currItem.initialZoomLevel+o.currItem.initialZoomLevel/15&&(ue=!0);var i=1,r=Be(),s=We();if(r>n)if(l.pinchToClose&&!ue&&b<=o.currItem.initialZoomLevel){var a=r-n,u=1-a/(r/1.2);Pe(u),Te("onPinchClose",u),ae=!0}else i=(r-n)/r,i>1&&(i=1),n=r-i*(r/3);else n>s&&(i=(n-s)/(6*r),i>1&&(i=1),n=s+i*r);0>i&&(i=0),ee=t,St(st,at,vt),pe.x+=vt.x-wt.x,pe.y+=vt.y-wt.y,Le(wt,vt),fe.x=Fe("x",n),fe.y=Fe("y",n),B=n>y,y=n,De()}else{if(!oe)return;if(se&&(se=!1,Math.abs(lt.x)>=ot&&(lt.x-=$[0].x-ct.x),Math.abs(lt.y)>=ot&&(lt.y-=$[0].y-ct.y)),ut.x=st.x,ut.y=st.y,0===lt.x&&0===lt.y)return;if("v"===oe&&l.closeOnVerticalDrag&&!$t()){pe.y+=lt.y,fe.y+=lt.y;var c=Mt();return W=!0,Te("onVerticalDrag",c),Pe(c),void De()}Dt(Oe(),st.x,st.y),Z=!0,ne=o.currItem.bounds;var d=Rt("x",lt);d||(Rt("y",lt),Re(fe),De())}}},Nt=function(e){if(q.isOldAndroid){if(X&&"mouseup"===e.type)return;e.type.indexOf("touch")>-1&&(clearTimeout(X),X=setTimeout(function(){X=0},600))}Te("pointerUp"),Ot(e,!1)&&e.preventDefault();var t;if(D){var n=r.arraySearch(dt,e.pointerId,"id");if(n>-1)if(t=dt.splice(n,1)[0],navigator.pointerEnabled)t.type=e.pointerType||"mouse";else{var i={4:"mouse",2:"touch",3:"pen"};t.type=i[e.pointerType],t.type||(t.type=e.pointerType||"mouse")}}var s,a=Lt(e),u=a.length;if("mouseup"===e.type&&(u=0),2===u)return $=null,!0;1===u&&Le(ct,a[0]),0!==u||oe||re||(t||("mouseup"===e.type?t={x:e.pageX,y:e.pageY,type:"mouse"}:e.changedTouches&&e.changedTouches[0]&&(t={x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY,type:"touch"})),Te("touchRelease",e,t));var c=-1;if(0===u&&(H=!1,r.unbind(window,m,o),It(),J?c=0:-1!==gt&&(c=Oe()-gt)),gt=1===u?Oe():-1,s=-1!==c&&150>c?"zoom":"swipe",J&&2>u&&(J=!1,1===u&&(s="zoomPointerUp"),Te("zoomGestureEnded")),$=null,Z||V||re||W)if(tt(),Y||(Y=Yt()),Y.calculateSwipeSpeed("x"),W){var d=Mt();if(d<l.verticalDragRange)o.close();else{var p=fe.y,h=le;nt("verticalDrag",0,1,300,r.easing.cubic.out,function(e){fe.y=(o.currItem.initialPosition.y-p)*e+p,Pe((1-h)*e+h),De()}),Te("onVerticalDrag",1)}}else{if((G||re)&&0===u){var f=Wt(s,Y);if(f)return;s="zoomPointerUp"}if(!re)return"swipe"!==s?void Ht():void(!G&&y>o.currItem.fitRatio&&Bt(Y))}},Yt=function(){var e,t,n={lastFlickOffset:{},lastFlickDist:{},lastFlickSpeed:{},slowDownRatio:{},slowDownRatioReverse:{},speedDecelerationRatio:{},speedDecelerationRatioAbs:{},distanceOffset:{},backAnimDestination:{},backAnimStarted:{},calculateSwipeSpeed:function(i){ht.length>1?(e=Oe()-N+50,t=ht[ht.length-2][i]):(e=Oe()-U,t=ct[i]),n.lastFlickOffset[i]=ut[i]-t,n.lastFlickDist[i]=Math.abs(n.lastFlickOffset[i]),n.lastFlickDist[i]>20?n.lastFlickSpeed[i]=n.lastFlickOffset[i]/e:n.lastFlickSpeed[i]=0,Math.abs(n.lastFlickSpeed[i])<.1&&(n.lastFlickSpeed[i]=0),n.slowDownRatio[i]=.95,n.slowDownRatioReverse[i]=1-n.slowDownRatio[i],n.speedDecelerationRatio[i]=1},calculateOverBoundsAnimOffset:function(e,t){n.backAnimStarted[e]||(fe[e]>ne.min[e]?n.backAnimDestination[e]=ne.min[e]:fe[e]<ne.max[e]&&(n.backAnimDestination[e]=ne.max[e]),void 0!==n.backAnimDestination[e]&&(n.slowDownRatio[e]=.7,n.slowDownRatioReverse[e]=1-n.slowDownRatio[e],n.speedDecelerationRatioAbs[e]<.05&&(n.lastFlickSpeed[e]=0,n.backAnimStarted[e]=!0,nt("bounceZoomPan"+e,fe[e],n.backAnimDestination[e],t||300,r.easing.sine.out,function(t){fe[e]=t,De()}))))},calculateAnimOffset:function(e){n.backAnimStarted[e]||(n.speedDecelerationRatio[e]=n.speedDecelerationRatio[e]*(n.slowDownRatio[e]+n.slowDownRatioReverse[e]-n.slowDownRatioReverse[e]*n.timeDiff/10),n.speedDecelerationRatioAbs[e]=Math.abs(n.lastFlickSpeed[e]*n.speedDecelerationRatio[e]),n.distanceOffset[e]=n.lastFlickSpeed[e]*n.speedDecelerationRatio[e]*n.timeDiff,fe[e]+=n.distanceOffset[e])},panAnimLoop:function(){return Ke.zoomPan&&(Ke.zoomPan.raf=A(n.panAnimLoop),n.now=Oe(),n.timeDiff=n.now-n.lastNow,n.lastNow=n.now,n.calculateAnimOffset("x"),n.calculateAnimOffset("y"),De(),n.calculateOverBoundsAnimOffset("x"),n.calculateOverBoundsAnimOffset("y"),n.speedDecelerationRatioAbs.x<.05&&n.speedDecelerationRatioAbs.y<.05)?(fe.x=Math.round(fe.x),fe.y=Math.round(fe.y),De(),void Je("zoomPan")):void 0}};return n},Bt=function(e){return e.calculateSwipeSpeed("y"),ne=o.currItem.bounds,e.backAnimDestination={},e.backAnimStarted={},Math.abs(e.lastFlickSpeed.x)<=.05&&Math.abs(e.lastFlickSpeed.y)<=.05?(e.speedDecelerationRatioAbs.x=e.speedDecelerationRatioAbs.y=0,e.calculateOverBoundsAnimOffset("x"),e.calculateOverBoundsAnimOffset("y"),!0):(et("zoomPan"),e.lastNow=Oe(),void e.panAnimLoop())},Wt=function(e,t){var n;re||(mt=p);var i;if("swipe"===e){var s=ut.x-ct.x,a=t.lastFlickDist.x<10;s>rt&&(a||t.lastFlickOffset.x>20)?i=-1:-rt>s&&(a||t.lastFlickOffset.x<-20)&&(i=1)}var u;i&&(p+=i,0>p?(p=l.loop?Jt()-1:0,u=!0):p>=Jt()&&(p=l.loop?0:Jt()-1,u=!0),(!u||l.loop)&&(be+=i,ve-=i,n=!0));var c,d=ye.x*ve,h=Math.abs(d-yt.x);return n||d>yt.x==t.lastFlickSpeed.x>0?(c=Math.abs(t.lastFlickSpeed.x)>0?h/Math.abs(t.lastFlickSpeed.x):333,c=Math.min(c,400),c=Math.max(c,250)):c=333,mt===p&&(n=!1),re=!0,Te("mainScrollAnimStart"),nt("mainScroll",yt.x,d,c,r.easing.cubic.out,je,function(){tt(),re=!1,mt=-1,(n||mt!==p)&&o.updateCurrItem(),Te("mainScrollAnimComplete")}),n&&o.updateCurrItem(!0),n},Xt=function(e){return 1/te*e*b},Ht=function(){var e=y,t=Be(),n=We();t>y?e=t:y>n&&(e=n);var i,s=1,a=le;return ae&&!B&&!ue&&t>y?(o.close(),!0):(ae&&(i=function(e){Pe((s-a)*e+a)}),o.zoomTo(e,0,200,r.easing.cubic.out,i),!0)};Ie("Gestures",{publicMethods:{initGestures:function(){var e=function(e,t,n,i,r){_=e+t,T=e+n,O=e+i,P=r?e+r:""};D=q.pointerEvent,D&&q.touch&&(q.touch=!1),D?navigator.pointerEnabled?e("pointer","down","move","up","cancel"):e("MSPointer","Down","Move","Up","Cancel"):q.touch?(e("touch","start","move","end","cancel"),M=!0):e("mouse","down","move","up"),m=T+" "+O+" "+P,v=_,D&&!M&&(M=navigator.maxTouchPoints>1||navigator.msMaxTouchPoints>1),o.likelyTouchDevice=M,g[_]=zt,g[T]=qt,g[O]=Nt,P&&(g[P]=g[O]),q.touch&&(v+=" mousedown",m+=" mousemove mouseup",g.mousedown=g[_],g.mousemove=g[T],g.mouseup=g[O]),M||(l.allowPanToNext=!1)}}});var Qt,Vt,Zt,Kt,Gt,Jt,en,tn=function(t,n,i,s){Qt&&clearTimeout(Qt),Kt=!0,Zt=!0;var a;t.initialLayout?(a=t.initialLayout,t.initialLayout=null):a=l.getThumbBoundsFn&&l.getThumbBoundsFn(p);var u=i?l.hideAnimationDuration:l.showAnimationDuration,c=function(){Je("initialZoom"),i?(o.template.removeAttribute("style"),o.bg.removeAttribute("style")):(Pe(1),n&&(n.style.display="block"),r.addClass(e,"pswp--animated-in"),Te("initialZoom"+(i?"OutEnd":"InEnd"))),s&&s(),Kt=!1};if(!u||!a||void 0===a.x){var h=function(){Te("initialZoom"+(i?"Out":"In")),y=t.initialZoomLevel,Le(fe,t.initialPosition),De(),e.style.opacity=i?0:1,Pe(1),c()};return void h()}var f=function(){var n=d,s=!o.currItem.src||o.currItem.loadError||l.showHideOpacity;t.miniImg&&(t.miniImg.style.webkitBackfaceVisibility="hidden"),i||(y=a.w/t.w,fe.x=a.x,fe.y=a.y-L,o[s?"template":"bg"].style.opacity=.001,De()),et("initialZoom"),i&&!n&&r.removeClass(e,"pswp--animated-in"),s&&(i?r[(n?"remove":"add")+"Class"](e,"pswp--animate_opacity"):setTimeout(function(){r.addClass(e,"pswp--animate_opacity")},30)),Qt=setTimeout(function(){if(Te("initialZoom"+(i?"Out":"In")),i){var o=a.w/t.w,l={x:fe.x,y:fe.y},d=y,p=le,h=function(t){1===t?(y=o,fe.x=a.x,fe.y=a.y-z):(y=(o-d)*t+d,fe.x=(a.x-l.x)*t+l.x,fe.y=(a.y-z-l.y)*t+l.y),De(),s?e.style.opacity=1-t:Pe(p-t*p)};n?nt("initialZoom",0,1,u,r.easing.cubic.out,h,c):(h(1),Qt=setTimeout(c,u+20))}else y=t.initialZoomLevel,Le(fe,t.initialPosition),De(),Pe(1),s?e.style.opacity=1:Pe(1),Qt=setTimeout(c,u+20)},i?25:90)};f()},nn={},rn=[],on={index:0,errorMsg:'<div class="pswp__error-msg"><a href="%url%" target="_blank">The image</a> could not be loaded.</div>',forceProgressiveLoading:!1,preload:[1,1],getNumItemsFn:function(){return Vt.length}},sn=function(){return{center:{x:0,y:0},max:{x:0,y:0},min:{x:0,y:0}}},an=function(e,t,n){var i=e.bounds;i.center.x=Math.round((nn.x-t)/2),i.center.y=Math.round((nn.y-n)/2)+e.vGap.top,i.max.x=t>nn.x?Math.round(nn.x-t):i.center.x,i.max.y=n>nn.y?Math.round(nn.y-n)+e.vGap.top:i.center.y,i.min.x=t>nn.x?0:i.center.x,i.min.y=n>nn.y?e.vGap.top:i.center.y},ln=function(e,t,n){if(e.src&&!e.loadError){var i=!n;if(i&&(e.vGap||(e.vGap={top:0,bottom:0}),Te("parseVerticalMargin",e)),nn.x=t.x,nn.y=t.y-e.vGap.top-e.vGap.bottom,i){var r=nn.x/e.w,o=nn.y/e.h;e.fitRatio=o>r?r:o;var s=l.scaleMode;"orig"===s?n=1:"fit"===s&&(n=e.fitRatio),n>1&&(n=1),e.initialZoomLevel=n,e.bounds||(e.bounds=sn())}if(!n)return;return an(e,e.w*n,e.h*n),i&&n===e.initialZoomLevel&&(e.initialPosition=e.bounds.center),e.bounds}return e.w=e.h=0,e.initialZoomLevel=e.fitRatio=1,e.bounds=sn(),e.initialPosition=e.bounds.center,e.bounds},un=function(e,t,n,i,r,o){t.loadError||i&&(t.imageAppended=!0,pn(t,i),n.appendChild(i),o&&setTimeout(function(){t&&t.loaded&&t.placeholder&&(t.placeholder.style.display="none",
t.placeholder=null)},500))},cn=function(e){e.loading=!0,e.loaded=!1;var t=e.img=r.createEl("pswp__img","img"),n=function(){e.loading=!1,e.loaded=!0,e.loadComplete?e.loadComplete(e):e.img=null,t.onload=t.onerror=null,t=null};return t.onload=n,t.onerror=function(){e.loadError=!0,n()},t.src=e.src,t},dn=function(e,t){return e.src&&e.loadError&&e.container?(t&&(e.container.innerHTML=""),e.container.innerHTML=l.errorMsg.replace("%url%",e.src),!0):void 0},pn=function(e,t,n){if(e.src){t||(t=e.container.lastChild);var i=n?e.w:Math.round(e.w*e.fitRatio),r=n?e.h:Math.round(e.h*e.fitRatio);e.placeholder&&!e.loaded&&(e.placeholder.style.width=i+"px",e.placeholder.style.height=r+"px"),t.style.width=i+"px",t.style.height=r+"px"}},hn=function(){if(rn.length){for(var e,t=0;t<rn.length;t++)e=rn[t],e.holder.index===e.index&&un(e.index,e.item,e.baseDiv,e.img,!1,e.clearPlaceholder);rn=[]}};Ie("Controller",{publicMethods:{lazyLoadItem:function(e){e=Ee(e);var t=Gt(e);!t||t.loaded||t.loading||(Te("gettingData",e,t),t.src&&cn(t))},initController:function(){r.extend(l,on,!0),o.items=Vt=n,Gt=o.getItemAt,Jt=l.getNumItemsFn,en=l.loop,Jt()<3&&(l.loop=!1),_e("beforeChange",function(e){var t,n=l.preload,i=null===e?!0:e>0,r=Math.min(n[0],Jt()),s=Math.min(n[1],Jt());for(t=1;(i?s:r)>=t;t++)o.lazyLoadItem(p+t);for(t=1;(i?r:s)>=t;t++)o.lazyLoadItem(p-t)}),_e("initialLayout",function(){o.currItem.initialLayout=l.getThumbBoundsFn&&l.getThumbBoundsFn(p)}),_e("mainScrollAnimComplete",hn),_e("initialZoomInEnd",hn),_e("destroy",function(){for(var e,t=0;t<Vt.length;t++)e=Vt[t],e.container&&(e.container=null),e.placeholder&&(e.placeholder=null),e.img&&(e.img=null),e.preloader&&(e.preloader=null),e.loadError&&(e.loaded=e.loadError=!1);rn=null})},getItemAt:function(e){return e>=0&&void 0!==Vt[e]?Vt[e]:!1},allowProgressiveImg:function(){return l.forceProgressiveLoading||!M||l.mouseUsed||screen.width>1200},setContent:function(e,t){l.loop&&(t=Ee(t));var n=o.getItemAt(e.index);n&&(n.container=null);var i,s=o.getItemAt(t);if(!s)return void(e.el.innerHTML="");Te("gettingData",t,s),e.index=t,e.item=s;var a=s.container=r.createEl("pswp__zoom-wrap");if(!s.src&&s.html&&(s.html.tagName?a.appendChild(s.html):a.innerHTML=s.html),dn(s),ln(s,me),!s.src||s.loadError||s.loaded)s.src&&!s.loadError&&(i=r.createEl("pswp__img","img"),i.style.opacity=1,i.src=s.src,pn(s,i),un(t,s,a,i,!0));else{if(s.loadComplete=function(n){if(u){if(e&&e.index===t){if(dn(n,!0))return n.loadComplete=n.img=null,ln(n,me),Me(n),void(e.index===p&&o.updateCurrZoomItem());n.imageAppended?!Kt&&n.placeholder&&(n.placeholder.style.display="none",n.placeholder=null):q.transform&&(re||Kt)?rn.push({item:n,baseDiv:a,img:n.img,index:t,holder:e,clearPlaceholder:!0}):un(t,n,a,n.img,re||Kt,!0)}n.loadComplete=null,n.img=null,Te("imageLoadComplete",t,n)}},r.features.transform){var c="pswp__img pswp__img--placeholder";c+=s.msrc?"":" pswp__img--placeholder--blank";var d=r.createEl(c,s.msrc?"img":"");s.msrc&&(d.src=s.msrc),pn(s,d),a.appendChild(d),s.placeholder=d}s.loading||cn(s),o.allowProgressiveImg()&&(!Zt&&q.transform?rn.push({item:s,baseDiv:a,img:s.img,index:t,holder:e}):un(t,s,a,s.img,!0,!0))}Zt||t!==p?Me(s):(ie=a.style,tn(s,i||s.img)),e.el.innerHTML="",e.el.appendChild(a)},cleanSlide:function(e){e.img&&(e.img.onload=e.img.onerror=null),e.loaded=e.loading=e.img=e.imageAppended=!1}}});var fn,mn={},vn=function(e,t,n){var i=document.createEvent("CustomEvent"),r={origEvent:e,target:e.target,releasePoint:t,pointerType:n||"touch"};i.initCustomEvent("pswpTap",!0,!0,r),e.target.dispatchEvent(i)};Ie("Tap",{publicMethods:{initTap:function(){_e("firstTouchStart",o.onTapStart),_e("touchRelease",o.onTapRelease),_e("destroy",function(){mn={},fn=null})},onTapStart:function(e){e.length>1&&(clearTimeout(fn),fn=null)},onTapRelease:function(e,t){if(t&&!Z&&!Q&&!Ge){var n=t;if(fn&&(clearTimeout(fn),fn=null,Ct(n,mn)))return void Te("doubleTap",n);if("mouse"===t.type)return void vn(e,t,"mouse");var i=e.target.tagName.toUpperCase();if("BUTTON"===i||r.hasClass(e.target,"pswp__single-tap"))return void vn(e,t);Le(mn,n),fn=setTimeout(function(){vn(e,t),fn=null},300)}}}});var gn;Ie("DesktopZoom",{publicMethods:{initDesktopZoom:function(){R||(M?_e("mouseUsed",function(){o.setupDesktopZoom()}):o.setupDesktopZoom(!0))},setupDesktopZoom:function(t){gn={};var n="wheel mousewheel DOMMouseScroll";_e("bindEvents",function(){r.bind(e,n,o.handleMouseWheel)}),_e("unbindEvents",function(){gn&&r.unbind(e,n,o.handleMouseWheel)}),o.mouseZoomedIn=!1;var i,s=function(){o.mouseZoomedIn&&(r.removeClass(e,"pswp--zoomed-in"),o.mouseZoomedIn=!1),1>y?r.addClass(e,"pswp--zoom-allowed"):r.removeClass(e,"pswp--zoom-allowed"),a()},a=function(){i&&(r.removeClass(e,"pswp--dragging"),i=!1)};_e("resize",s),_e("afterChange",s),_e("pointerDown",function(){o.mouseZoomedIn&&(i=!0,r.addClass(e,"pswp--dragging"))}),_e("pointerUp",a),t||s()},handleMouseWheel:function(e){if(y<=o.currItem.fitRatio)return l.modal&&(!l.closeOnScroll||Ge||H?e.preventDefault():S&&Math.abs(e.deltaY)>2&&(d=!0,o.close())),!0;if(e.stopPropagation(),gn.x=0,"deltaX"in e)1===e.deltaMode?(gn.x=18*e.deltaX,gn.y=18*e.deltaY):(gn.x=e.deltaX,gn.y=e.deltaY);else if("wheelDelta"in e)e.wheelDeltaX&&(gn.x=-.16*e.wheelDeltaX),e.wheelDeltaY?gn.y=-.16*e.wheelDeltaY:gn.y=-.16*e.wheelDelta;else{if(!("detail"in e))return;gn.y=e.detail}Ye(y,!0);var t=fe.x-gn.x,n=fe.y-gn.y;(l.modal||t<=ne.min.x&&t>=ne.max.x&&n<=ne.min.y&&n>=ne.max.y)&&e.preventDefault(),o.panTo(t,n)},toggleDesktopZoom:function(t){t=t||{x:me.x/2+ge.x,y:me.y/2+ge.y};var n=l.getDoubleTapZoom(!0,o.currItem),i=y===n;o.mouseZoomedIn=!i,o.zoomTo(i?o.currItem.initialZoomLevel:n,t,333),r[(i?"remove":"add")+"Class"](e,"pswp--zoomed-in")}}});var yn,bn,wn,xn,Cn,kn,In,En,$n,_n,Tn,On,Pn={history:!0,galleryUID:1},Sn=function(){return Tn.hash.substring(1)},Dn=function(){yn&&clearTimeout(yn),wn&&clearTimeout(wn)},Mn=function(){var e=Sn(),t={};if(e.length<5)return t;var n,i=e.split("&");for(n=0;n<i.length;n++)if(i[n]){var r=i[n].split("=");r.length<2||(t[r[0]]=r[1])}if(l.galleryPIDs){var o=t.pid;for(t.pid=0,n=0;n<Vt.length;n++)if(Vt[n].pid===o){t.pid=n;break}}else t.pid=parseInt(t.pid,10)-1;return t.pid<0&&(t.pid=0),t},An=function(){if(wn&&clearTimeout(wn),Ge||H)return void(wn=setTimeout(An,500));xn?clearTimeout(bn):xn=!0;var e=p+1,t=Gt(p);t.hasOwnProperty("pid")&&(e=t.pid);var n=In+"&gid="+l.galleryUID+"&pid="+e;En||-1===Tn.hash.indexOf(n)&&(_n=!0);var i=Tn.href.split("#")[0]+"#"+n;On?"#"+n!==window.location.hash&&history[En?"replaceState":"pushState"]("",document.title,i):En?Tn.replace(i):Tn.hash=n,En=!0,bn=setTimeout(function(){xn=!1},60)};Ie("History",{publicMethods:{initHistory:function(){if(r.extend(l,Pn,!0),l.history){Tn=window.location,_n=!1,$n=!1,En=!1,In=Sn(),On="pushState"in history,In.indexOf("gid=")>-1&&(In=In.split("&gid=")[0],In=In.split("?gid=")[0]),_e("afterChange",o.updateURL),_e("unbindEvents",function(){r.unbind(window,"hashchange",o.onHashChange)});var e=function(){kn=!0,$n||(_n?history.back():In?Tn.hash=In:On?history.pushState("",document.title,Tn.pathname+Tn.search):Tn.hash=""),Dn()};_e("unbindEvents",function(){d&&e()}),_e("destroy",function(){kn||e()}),_e("firstUpdate",function(){p=Mn().pid});var t=In.indexOf("pid=");t>-1&&(In=In.substring(0,t),"&"===In.slice(-1)&&(In=In.slice(0,-1))),setTimeout(function(){u&&r.bind(window,"hashchange",o.onHashChange)},40)}},onHashChange:function(){return Sn()===In?($n=!0,void o.close()):void(xn||(Cn=!0,o.goTo(Mn().pid),Cn=!1))},updateURL:function(){Dn(),Cn||(En?yn=setTimeout(An,800):An())}}}),r.extend(o,it)};return e}),!function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.PhotoSwipeUI_Default=t()}(this,function(){"use strict";var e=function(e,t){var n,i,r,o,s,a,l,u,c,d,p,h,f,m,v,g,y,b,w,x=this,C=!1,k=!0,I=!0,E={barsSize:{top:44,bottom:"auto"},closeElClasses:["item","caption","zoom-wrap","ui","top-bar"],timeToIdle:4e3,timeToIdleOutside:1e3,loadingIndicatorDelay:1e3,addCaptionHTMLFn:function(e,t){return e.title?(t.children[0].innerHTML=e.title,!0):(t.children[0].innerHTML="",!1)},closeEl:!0,captionEl:!0,fullscreenEl:!0,zoomEl:!0,shareEl:!0,counterEl:!0,arrowEl:!0,preloaderEl:!0,tapToClose:!1,tapToToggleControls:!0,clickToCloseNonZoomable:!0,shareButtons:[{id:"facebook",label:"Share on Facebook",url:"https://www.facebook.com/sharer/sharer.php?u={{url}}"},{id:"twitter",label:"Tweet",url:"https://twitter.com/intent/tweet?text={{text}}&url={{url}}"},{id:"pinterest",label:"Pin it",url:"http://www.pinterest.com/pin/create/button/?url={{url}}&media={{image_url}}&description={{text}}"},{id:"download",label:"Download image",url:"{{raw_image_url}}",download:!0}],getImageURLForShare:function(){return e.currItem.src||""},getPageURLForShare:function(){return window.location.href},getTextForShare:function(){return e.currItem.title||""},indexIndicatorSep:" / "},_=function(e){if(g)return!0;e=e||window.event,v.timeToIdle&&v.mouseUsed&&!c&&L();for(var n,i,r=e.target||e.srcElement,o=r.className,s=0;s<W.length;s++)n=W[s],n.onTap&&o.indexOf("pswp__"+n.name)>-1&&(n.onTap(),i=!0);if(i){e.stopPropagation&&e.stopPropagation(),g=!0;var a=t.features.isOldAndroid?600:30;y=setTimeout(function(){g=!1},a)}},T=function(){return!e.likelyTouchDevice||v.mouseUsed||screen.width>1200},O=function(e,n,i){t[(i?"add":"remove")+"Class"](e,"pswp__"+n)},P=function(){var e=1===v.getNumItemsFn();e!==m&&(O(i,"ui--one-slide",e),m=e)},S=function(){O(l,"share-modal--hidden",I)},D=function(){return I=!I,I?(t.removeClass(l,"pswp__share-modal--fade-in"),setTimeout(function(){I&&S()},300)):(S(),setTimeout(function(){I||t.addClass(l,"pswp__share-modal--fade-in")},30)),I||A(),!1},M=function(t){t=t||window.event;var n=t.target||t.srcElement;return e.shout("shareLinkClick",t,n),n.href?n.hasAttribute("download")?!0:(window.open(n.href,"pswp_share","scrollbars=yes,resizable=yes,toolbar=no,location=yes,width=550,height=420,top=100,left="+(window.screen?Math.round(screen.width/2-275):100)),I||D(),!1):!1},A=function(){for(var e,t,n,i,r,o="",s=0;s<v.shareButtons.length;s++)e=v.shareButtons[s],n=v.getImageURLForShare(e),i=v.getPageURLForShare(e),r=v.getTextForShare(e),t=e.url.replace("{{url}}",encodeURIComponent(i)).replace("{{image_url}}",encodeURIComponent(n)).replace("{{raw_image_url}}",n).replace("{{text}}",encodeURIComponent(r)),o+='<a href="'+t+'" target="_blank" class="pswp__share--'+e.id+'"'+(e.download?"download":"")+">"+e.label+"</a>",v.parseShareButtonOut&&(o=v.parseShareButtonOut(e,o));l.children[0].innerHTML=o,l.children[0].onclick=M},j=function(e){for(var n=0;n<v.closeElClasses.length;n++)if(t.hasClass(e,"pswp__"+v.closeElClasses[n]))return!0},F=0,L=function(){clearTimeout(w),F=0,c&&x.setIdle(!1)},R=function(e){e=e?e:window.event;var t=e.relatedTarget||e.toElement;t&&"HTML"!==t.nodeName||(clearTimeout(w),w=setTimeout(function(){x.setIdle(!0)},v.timeToIdleOutside))},z=function(){v.fullscreenEl&&(n||(n=x.getFullscreenAPI()),n?(t.bind(document,n.eventK,x.updateFullscreen),x.updateFullscreen(),t.addClass(e.template,"pswp--supports-fs")):t.removeClass(e.template,"pswp--supports-fs"))},q=function(){v.preloaderEl&&(U(!0),d("beforeChange",function(){clearTimeout(f),f=setTimeout(function(){e.currItem&&e.currItem.loading?(!e.allowProgressiveImg()||e.currItem.img&&!e.currItem.img.naturalWidth)&&U(!1):U(!0)},v.loadingIndicatorDelay)}),d("imageLoadComplete",function(t,n){e.currItem===n&&U(!0)}))},U=function(e){h!==e&&(O(p,"preloader--active",!e),h=e)},N=function(e){var n=e.vGap;if(T()){var s=v.barsSize;if(v.captionEl&&"auto"===s.bottom)if(o||(o=t.createEl("pswp__caption pswp__caption--fake"),o.appendChild(t.createEl("pswp__caption__center")),i.insertBefore(o,r),t.addClass(i,"pswp__ui--fit")),v.addCaptionHTMLFn(e,o,!0)){var a=o.clientHeight;n.bottom=parseInt(a,10)||44}else n.bottom=s.top;else n.bottom="auto"===s.bottom?0:s.bottom;n.top=s.top}else n.top=n.bottom=0},Y=function(){v.timeToIdle&&d("mouseUsed",function(){t.bind(document,"mousemove",L),t.bind(document,"mouseout",R),b=setInterval(function(){F++,2===F&&x.setIdle(!0)},v.timeToIdle/2)})},B=function(){d("onVerticalDrag",function(e){k&&.95>e?x.hideControls():!k&&e>=.95&&x.showControls()});var e;d("onPinchClose",function(t){k&&.9>t?(x.hideControls(),e=!0):e&&!k&&t>.9&&x.showControls()}),d("zoomGestureEnded",function(){e=!1,e&&!k&&x.showControls()})},W=[{name:"caption",option:"captionEl",onInit:function(e){r=e}},{name:"share-modal",option:"shareEl",onInit:function(e){l=e},onTap:function(){D()}},{name:"button--share",option:"shareEl",onInit:function(e){a=e},onTap:function(){D()}},{name:"button--zoom",option:"zoomEl",onTap:e.toggleDesktopZoom},{name:"counter",option:"counterEl",onInit:function(e){s=e}},{name:"button--close",option:"closeEl",onTap:e.close},{name:"button--arrow--left",option:"arrowEl",onTap:e.prev},{name:"button--arrow--right",option:"arrowEl",onTap:e.next},{name:"button--fs",option:"fullscreenEl",onTap:function(){n.isFullscreen()?n.exit():n.enter()}},{name:"preloader",option:"preloaderEl",onInit:function(e){p=e}}],X=function(){var e,n,r,o=function(i){if(i)for(var o=i.length,s=0;o>s;s++){e=i[s],n=e.className;for(var a=0;a<W.length;a++)r=W[a],n.indexOf("pswp__"+r.name)>-1&&(v[r.option]?(t.removeClass(e,"pswp__element--disabled"),r.onInit&&r.onInit(e)):t.addClass(e,"pswp__element--disabled"))}};o(i.children);var s=t.getChildByClass(i,"pswp__top-bar");s&&o(s.children)};x.init=function(){t.extend(e.options,E,!0),v=e.options,i=t.getChildByClass(e.scrollWrap,"pswp__ui"),d=e.listen,B(),d("beforeChange",x.update),d("doubleTap",function(t){var n=e.currItem.initialZoomLevel;e.getZoomLevel()!==n?e.zoomTo(n,t,333):e.zoomTo(v.getDoubleTapZoom(!1,e.currItem),t,333)}),d("preventDragEvent",function(e,t,n){var i=e.target||e.srcElement;i&&i.className&&e.type.indexOf("mouse")>-1&&(i.className.indexOf("__caption")>0||/(SMALL|STRONG|EM)/i.test(i.tagName))&&(n.prevent=!1)}),d("bindEvents",function(){t.bind(i,"pswpTap click",_),t.bind(e.scrollWrap,"pswpTap",x.onGlobalTap),e.likelyTouchDevice||t.bind(e.scrollWrap,"mouseover",x.onMouseOver)}),d("unbindEvents",function(){I||D(),b&&clearInterval(b),t.unbind(document,"mouseout",R),t.unbind(document,"mousemove",L),t.unbind(i,"pswpTap click",_),t.unbind(e.scrollWrap,"pswpTap",x.onGlobalTap),t.unbind(e.scrollWrap,"mouseover",x.onMouseOver),n&&(t.unbind(document,n.eventK,x.updateFullscreen),n.isFullscreen()&&(v.hideAnimationDuration=0,n.exit()),n=null)}),d("destroy",function(){v.captionEl&&(o&&i.removeChild(o),t.removeClass(r,"pswp__caption--empty")),l&&(l.children[0].onclick=null),t.removeClass(i,"pswp__ui--over-close"),t.addClass(i,"pswp__ui--hidden"),x.setIdle(!1)}),v.showAnimationDuration||t.removeClass(i,"pswp__ui--hidden"),d("initialZoomIn",function(){v.showAnimationDuration&&t.removeClass(i,"pswp__ui--hidden")}),d("initialZoomOut",function(){t.addClass(i,"pswp__ui--hidden")}),d("parseVerticalMargin",N),X(),v.shareEl&&a&&l&&(I=!0),P(),Y(),z(),q()},x.setIdle=function(e){c=e,O(i,"ui--idle",e)},x.update=function(){k&&e.currItem?(x.updateIndexIndicator(),v.captionEl&&(v.addCaptionHTMLFn(e.currItem,r),O(r,"caption--empty",!e.currItem.title)),C=!0):C=!1,I||D(),P()},x.updateFullscreen=function(i){i&&setTimeout(function(){e.setScrollOffset(0,t.getScrollY())},50),t[(n.isFullscreen()?"add":"remove")+"Class"](e.template,"pswp--fs")},x.updateIndexIndicator=function(){v.counterEl&&(s.innerHTML=e.getCurrentIndex()+1+v.indexIndicatorSep+v.getNumItemsFn())},x.onGlobalTap=function(n){n=n||window.event;var i=n.target||n.srcElement;if(!g)if(n.detail&&"mouse"===n.detail.pointerType){if(j(i))return void e.close();t.hasClass(i,"pswp__img")&&(1===e.getZoomLevel()&&e.getZoomLevel()<=e.currItem.fitRatio?v.clickToCloseNonZoomable&&e.close():e.toggleDesktopZoom(n.detail.releasePoint))}else if(v.tapToToggleControls&&(k?x.hideControls():x.showControls()),v.tapToClose&&(t.hasClass(i,"pswp__img")||j(i)))return void e.close()},x.onMouseOver=function(e){e=e||window.event;var t=e.target||e.srcElement;O(i,"ui--over-close",j(t))},x.hideControls=function(){t.addClass(i,"pswp__ui--hidden"),k=!1},x.showControls=function(){k=!0,C||x.update(),t.removeClass(i,"pswp__ui--hidden")},x.supportsFullscreen=function(){var e=document;return!!(e.exitFullscreen||e.mozCancelFullScreen||e.webkitExitFullscreen||e.msExitFullscreen)},x.getFullscreenAPI=function(){var t,n=document.documentElement,i="fullscreenchange";return n.requestFullscreen?t={enterK:"requestFullscreen",exitK:"exitFullscreen",elementK:"fullscreenElement",eventK:i}:n.mozRequestFullScreen?t={enterK:"mozRequestFullScreen",exitK:"mozCancelFullScreen",elementK:"mozFullScreenElement",eventK:"moz"+i}:n.webkitRequestFullscreen?t={enterK:"webkitRequestFullscreen",exitK:"webkitExitFullscreen",elementK:"webkitFullscreenElement",eventK:"webkit"+i}:n.msRequestFullscreen&&(t={enterK:"msRequestFullscreen",exitK:"msExitFullscreen",elementK:"msFullscreenElement",eventK:"MSFullscreenChange"}),t&&(t.enter=function(){return u=v.closeOnScroll,v.closeOnScroll=!1,"webkitRequestFullscreen"!==this.enterK?e.template[this.enterK]():void e.template[this.enterK](Element.ALLOW_KEYBOARD_INPUT)},t.exit=function(){return v.closeOnScroll=u,document[this.exitK]()},t.isFullscreen=function(){return document[this.elementK]}),t}};return e}),$(document).ready(function(){$("input[type=checkbox], input[type=radio]").checkbox()});